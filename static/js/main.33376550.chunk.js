(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{203:function(e,t,a){e.exports=a(333)},332:function(e,t,a){},333:function(e,t,a){"use strict";a.r(t);a(204),a(232),a(233),a(234),a(235),a(236),a(237),a(238),a(239),a(240),a(242),a(243),a(244),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(253),a(254),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(263),a(264),a(265),a(266),a(267),a(268),a(269),a(270),a(274);var l=a(0),n=a.n(l),o=a(74),u=a.n(o),r=a(25),c=a.n(r),i=a(30),d=a(7),s=a(55),m=a.n(s),E=(a(280),a(156)),p=a.n(E),v=a(157),D=a.n(v),b=a(60),y=a.n(b),h=a(96),O=a.n(h),g=a(2),C=function(e){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(e)},T=a(79),f=a.n(T),S="SET_MODAL",j=function(e){var t=e.data,a=e.showAll,o=void 0!==a&&a,u=e.dispatch,r=e.itemsName,s=e.needHide,m=void 0===s||s,E=Object(l.useState)((function(){return o})),p=Object(d.a)(E,2),v=p[0],D=p[1];if(0===t.length){if("accounts"===r)return n.a.createElement(g.l,null,"\u041d\u0435\u0442 \u0441\u0447\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f");if("budgets"===r)return n.a.createElement(g.l,null,"\u041d\u0435\u0442 \u0431\u044e\u0434\u0436\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f")}var b=t.sort((function(e,t){return t.sum-e.sum})).map((function(e,t){return 3!==t||v?t>3&&!v?null:n.a.createElement(f.a,{key:t,indicator:C(e.sum),expandable:!0,"data-id":e._id,onClick:function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("accounts"!==r){e.next=5;break}return e.next=3,u({type:"SET_ACCOUNT",payload:{id:t.currentTarget.dataset.id}});case 3:return e.next=5,u({type:"SET_ACTIVE_VIEW",payload:{view:"info",panel:"account"}});case 5:if("budgets"!==r){e.next=10;break}return e.next=8,u({type:"SET_BUDGET",payload:{id:t.currentTarget.dataset.id}});case 8:return e.next=10,u({type:"SET_ACTIVE_VIEW",payload:{view:"info",panel:"budget"}});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},e.title):n.a.createElement(f.a,{key:"showAll",expandable:!0,onClick:function(){D(!0)}},n.a.createElement(g.T,{weight:"semibold",style:{marginBottom:16}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"))}));return m&&v&&b.push(n.a.createElement(f.a,{key:t.length,expandable:!0,onClick:function(){D(!1)}},n.a.createElement(g.T,{weight:"semibold",style:{marginBottom:16}},"accounts"===r?"\u0421\u043a\u0440\u044b\u0442\u044c \u0441\u0447\u0435\u0442\u0430":"\u0421\u043a\u0440\u044b\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442\u044b"))),b},_=a(50),A=a.n(_),w=a(67),F=a.n(w),x=a(76),I=a.n(x),B=a(6),k=()=>{var e=document.documentElement.scrollTop||document.body.scrollTop;e>30||e>0&&(window.requestAnimationFrame(k),window.scrollTo(0,e-e/8))},H={accounts:[],budgets:[],account:null,budget:null,modal:null,successMessage:null,error:null,activeView:"init",activePanel:"init",popout:null,editedItem:null,currentDate:new Date,history:[],modalsHistory:[],popoutHistory:[],contextHistory:!1,canClose:!0,scheme:"client_light",modalOpenTime:+new Date},M=(e,t)=>{switch(t.type){case"SET_COLOR_SCHEME":return Object(B.a)(Object(B.a)({},e),{},{scheme:t.payload.scheme});case"SET_ACTIVE_VIEW":window.history.pushState(null,null),window.scrollTo(0,30),k();var a=e.history;if(0!==a.length){var l=a[a.length-1];return l.view===t.payload.view&&l.panel===t.payload.panel?Object(B.a)({},e):Object(B.a)(Object(B.a)({},e),{},{activeView:t.payload.view,activePanel:t.payload.panel,history:[...a,{view:t.payload.view,panel:t.payload.panel}],canClose:!1,contextHistory:!1,successMessage:null,error:null})}return Object(B.a)(Object(B.a)({},e),{},{activeView:t.payload.view,activePanel:t.payload.panel,history:[...a,{view:t.payload.view,panel:t.payload.panel}],canClose:!0,contextHistory:!1,successMessage:null,error:null});case"SET_HISTORY_BACK":window.history.pushState(null,null),window.scrollTo(0,30),k();var n=e.history[e.history.length-2],o=e.popoutHistory||[],u=e.modalsHistory||[],r=e.contextHistory||!1;if(0!==o.length){var c=e.history.length<=1;return Object(B.a)(Object(B.a)({},e),{},{popout:null,popoutHistory:[],canClose:c,editedItem:null})}if(r){var i=e.history.length<=1;return Object(B.a)(Object(B.a)({},e),{},{contextHistory:!1,canClose:i,editedItem:null})}if(0!==u.length){if(+new Date-e.modalOpenTime<700)return Object(B.a)({},e);var d=e.history.length<=1;return Object(B.a)(Object(B.a)({},e),{},{modal:null,modalsHistory:[],canClose:d,editedItem:null})}if(n){var s="home"===n.view&&"home"===n.panel,m=e.history;return m.pop(),Object(B.a)(Object(B.a)({},e),{},{activeView:n.view,activePanel:n.panel,history:[...m],editedItem:null,canClose:s,successMessage:null,error:null})}return Object(B.a)(Object(B.a)({},e),{},{activeView:"home",activePanel:"home",history:[],canClose:!0,editedItem:null,successMessage:null,error:null});case"SET_ACCOUNTS":var E,p=null===(E=e.account)||void 0===E?void 0:E._id,v=p?t.payload.accounts.find(e=>e._id===p):p;return Object(B.a)(Object(B.a)({},e),{},{accounts:t.payload.accounts,account:v});case"SET_BUDGETS":var D,b=null===(D=e.budget)||void 0===D?void 0:D._id,y=b?t.payload.budgets.find(e=>e._id===b):b;return Object(B.a)(Object(B.a)({},e),{},{budgets:t.payload.budgets,budget:y});case"SET_ACCOUNT":var h=t.payload.id;return Object(B.a)(Object(B.a)({},e),{},{account:e.accounts.find(e=>e._id===h)});case"SET_BUDGET":var O=t.payload.id;return Object(B.a)(Object(B.a)({},e),{},{budget:O?e.budgets.find(e=>e._id===O):O});case"SET_EDITED_ITEM":return Object(B.a)(Object(B.a)({},e),{},{editedItem:t.payload.item});case"SET_POPOUT":t.payload.alert&&window.history.pushState(null,null);var g=e.history,C=e.canClose;return 0!==g.length||t.payload.popout?C=1===g.length&&!t.payload.popout:0!==g.length||t.payload.popout||(C=!0),Object(B.a)(Object(B.a)({},e),{},{popout:t.payload.popout,popoutHistory:t.payload.popout?[t.payload.popout]:[],canClose:C});case S:var T=e.history,f=e.canClose;return 0!==T.length||t.payload.modal?f=1===T.length&&!t.payload.modal:0!==T.length||t.payload.modal||(f=!0),Object(B.a)(Object(B.a)({},e),{},{modal:t.payload.modal,modalsHistory:t.payload.modal?[t.payload.modal]:[],canClose:f,modalOpenTime:+new Date});case"SET_TOGGLE_CONTEXT":var j=e.history,_=e.canClose;return 0!==j.length||t.payload.context?_=1===j.length&&!t.payload.context:0!==j.length||t.payload.context||(_=!0),Object(B.a)(Object(B.a)({},e),{},{contextHistory:t.payload.context,canClose:_});case"SET_SUCCESS_MESSAGE":return Object(B.a)(Object(B.a)({},e),{},{successMessage:t.payload.message});case"SET_ERROR":return Object(B.a)(Object(B.a)({},e),{},{error:t.payload.error});case"SET_DATE":return Object(B.a)(Object(B.a)({},e),{},{currentDate:new Date(t.payload.date)});default:return e}},P=Object(l.createContext)(),G=e=>{var t=e.children,a=Object(l.useReducer)(M,H);return n.a.createElement(P.Provider,{value:a},t)},L=a(151),N=a.n(L),V=a(152),R=a.n(V),U=function(){var e=Object(l.useContext)(P),t=Object(d.a)(e,2),a=t[0],o=t[1],u=Object(l.useState)(null),r=Object(d.a)(u,2),c=r[0],i=r[1];return Object(l.useEffect)((function(){a.error&&i(n.a.createElement(g.P,{onClose:function(){o({type:"SET_ERROR",payload:{error:null}}),i(null)},before:n.a.createElement(N.a,{style:{color:"var(--destructive)"}})},a.error.message))}),[i,o,a.error]),Object(l.useEffect)((function(){a.successMessage&&i(n.a.createElement(g.P,{onClose:function(){o({type:"SET_SUCCESS_MESSAGE",payload:{message:null}}),i(null)},before:n.a.createElement(R.a,{style:{color:"var(--accent)"}})},a.successMessage))}),[i,o,a.successMessage]),n.a.createElement(n.a.Fragment,null,c)},q=a(335),W=a(153),K=a(336),z=a(337),J=a(342),Y=a(78),X=a(154),Q=a.n(X),Z=a(155),$=a.n(Z),ee=function(e){var t=e.onRefresh,a=Object(l.useContext)(P),o=Object(d.a)(a,2),u=o[0],r=o[1],c=Object(q.a)(Object(W.a)(u.currentDate,1),new Date),i=Object(K.a)(new Date(u.currentDate),new Date(2015,0,1)),s=Object(l.useState)(0),m=Object(d.a)(s,2),E=m[0],p=m[1];return n.a.createElement(g.p,null,n.a.createElement(g.e,{before:n.a.createElement(g.c,{disabled:i,onClick:function(){var e=+new Date;e-E>500&&(r({type:"SET_DATE",payload:{date:Object(z.a)(u.currentDate,1)}}),t(),p(e))},mode:"secondary"},n.a.createElement(Q.a,null)),asideContent:n.a.createElement(g.c,{disabled:c,onClick:function(){var e=+new Date;e-E>500&&(r({type:"SET_DATE",payload:{date:Object(W.a)(u.currentDate,1)}}),t(),p(e))},mode:"secondary"},n.a.createElement($.a,null)),style:{textAlign:"center",fontWeight:"bold"}},n.a.createElement("div",{style:{cursor:"auto"}},Object(J.a)(u.currentDate,"LLLL yyyy",{locale:Y.a}).toLocaleUpperCase())))},te=e=>{var t=e.id,a=e.accounts,o=e.budgets,u=e.dispatch,r=e.onRefresh,c=e.isFetching,i=e.shopList,s=e.context,m=Object(l.useState)(()=>s),E=Object(d.a)(m,2),v=E[0],b=E[1],h=Object(l.useState)(!1),T=Object(d.a)(h,2),f=T[0],_=T[1],w=a.map(e=>e.sum).reduce((e,t)=>e+t,0),x=i.reduce((e,t)=>t.done?e+1:e,0),B=n.a.createElement(g.c,{mode:"tertiary",onClick:()=>{u({type:"SET_ACTIVE_VIEW",payload:{view:"more",panel:"shop-list"}})}},0===i.length?"\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043a\u0443\u043f\u043e\u043a":"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0441\u043f\u0438\u0441\u043a\u0443 \u043f\u043e\u043a\u0443\u043f\u043e\u043a");Object(l.useEffect)(()=>{b(s)},[s]);var k=()=>{u({type:"SET_TOGGLE_CONTEXT",payload:{context:!v}})};return n.a.createElement(p.a,{id:t},n.a.createElement(D.a,{left:n.a.createElement(n.a.Fragment,null,0!==a.length||f?n.a.createElement(g.C,{onClick:()=>{v&&k(),u({type:S,payload:{modal:"add-account"}})}},n.a.createElement(F.a,null)):n.a.createElement(g.W,{text:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0443\u0447\u0435\u0442 \u0444\u0438\u043d\u0430\u043d\u0441\u043e\u0432 \u0441 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0447\u0435\u0442\u0430",onClose:()=>{_(!0),u({type:S,payload:{modal:"add-account"}})}},n.a.createElement(g.C,{onClick:()=>{k(),u({type:S,payload:{modal:"add-account"}})}},n.a.createElement(F.a,null))),0!==a.length&&n.a.createElement(g.C,{onClick:()=>{k()}},n.a.createElement(A.a,null)))},"\u0411\u0430\u043b\u0430\u043d\u0441"),n.a.createElement(g.E,{opened:v,onClose:k},n.a.createElement(g.u,null,n.a.createElement(g.e,{before:n.a.createElement(A.a,null),onClick:()=>{u({type:"SET_ACCOUNT",payload:{id:null}}),u({type:S,payload:{modal:"add-money"}}),k()}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),n.a.createElement(g.e,{before:n.a.createElement(I.a,null),onClick:()=>{u({type:S,payload:{modal:"transfer-money"}}),k()}},"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438"))),n.a.createElement(ee,{onRefresh:r}),n.a.createElement(g.I,{onRefresh:r,isFetching:c},n.a.createElement(g.u,null,n.a.createElement(y.a,{header:n.a.createElement(g.q,{mode:"secondary"},"\u0412\u0430\u0448\u0438 \u0441\u0447\u0435\u0442\u0430"),separator:"show"},n.a.createElement(O.a,null,n.a.createElement(g.V,{level:"1",weight:"semibold",style:{marginBottom:16}},C(w)),n.a.createElement(j,{data:a,dispatch:u,showAll:!1,itemsName:"accounts"}))),n.a.createElement(y.a,{header:n.a.createElement(g.q,{mode:"secondary"},"\u0412\u0430\u0448\u0438 \u0431\u044e\u0434\u0436\u0435\u0442\u044b"),separator:"show"},n.a.createElement(O.a,null,n.a.createElement(j,{data:o,dispatch:u,showAll:!1,itemsName:"budgets"}))),n.a.createElement(y.a,{header:n.a.createElement(g.q,{mode:"secondary"},"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043a\u0443\u043f\u043e\u043a")},n.a.createElement(g.l,null,0===i.length?n.a.createElement(n.a.Fragment,null,"\u0412\u0430\u0448 \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043a\u0443\u043f\u043e\u043a \u043f\u0443\u0441\u0442"):n.a.createElement(n.a.Fragment,null,"\u0412 \u0412\u0430\u0448\u0435\u043c \u0441\u043f\u0438\u0441\u043a\u0435 \u043f\u043e\u043a\u0443\u043f\u043e\u043a ".concat(i.length," \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432. ").concat(x," \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e.")),n.a.createElement("br",null),B)))),n.a.createElement(U,null))},ae=a(48),le=a(97),ne=a.n(le),oe=a(158),ue=a.n(oe),re=function(e){var t=Object(l.useState)(!1),a=Object(d.a)(t,2),o=a[0],u=a[1],r=Object(l.useState)(null),s=Object(d.a)(r,2),m=s[0],E=s[1],p=Object(l.useState)(null),v=Object(d.a)(p,2),D=v[0],b=v[1],y=Object(l.useState)({}),h=Object(d.a)(y,2),O=h[0],C=h[1],T=Object(l.useContext)(P),f=Object(d.a)(T,2)[1],j=Object(l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};C(e),E(null),b(null),u(!0),f({type:"SET_POPOUT",payload:{popout:n.a.createElement(g.G,null,n.a.createElement(g.L,null))}})}),[f]),_=O.method,A=void 0===_?"GET":_,w=O.params,F=Object(ae.a)(O,["method","params"]),x={method:A,baseURL:"https://balance.z-labz.ru/api",url:e,headers:{"Content-Type":"application/json"},params:w?Object(B.a)(Object(B.a)({},w),ne.a.parse(window.location.search)):Object(B.a)({},ne.a.parse(window.location.search)),data:"GET"!==A?F:null};return Object(l.useEffect)((function(){o&&function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!1),e.next=3,ue()(x).then(function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(t.data.data),f({type:"SET_POPOUT",payload:{popout:null}}),f({type:S,payload:{modal:null}}),f({type:"SET_SUCCESS_MESSAGE",payload:{message:t.data.message}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t=(null===e||void 0===e?void 0:e.response)?e.response.data.error:new Error("\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c \u043a API");b(t),u(!1),f({type:"SET_POPOUT",payload:{popout:null}}),f({type:S,payload:{modal:null}}),f({type:"SET_ERROR",payload:{error:t}})}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o,x,f]),[{isLoading:o,response:m,error:D},j]},ce=a(26),ie=a.n(ce),de=a(49),se=a.n(de),me=a(170),Ee=a.n(me),pe=a(171),ve=a.n(pe),De=a(172),be=a.n(De),ye=a(173),he=a.n(ye),Oe=function(e){var t=e.currentTarget.validity;return t.valid&&" "!==e.currentTarget.value?{status:"valid",message:null}:t.badInput||t.valueMissing||" "===e.currentTarget.value?{status:"error",message:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0432\u043e\u0434\u0430 | \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}:t.tooLong?{status:"error",message:"\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u0430 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430"}:t.typeMismatch?{status:"error",message:"\u041d\u0435\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0442\u0438\u043f\u0430"}:t.stepMismatch?{status:"error",message:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u0430\u044f \u0434\u0440\u043e\u0431\u043d\u0430\u044f \u0447\u0430\u0441\u0442\u044c"}:t.rangeOverflow?"date"===e.currentTarget.type?{status:"error",message:"\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u0432\u0435\u0441\u0442\u0438 \u0431\u0443\u0434\u0443\u0449\u0443\u044e \u0434\u0430\u0442\u0443"}:{status:"error",message:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0435 \u0447\u0438\u0441\u043b\u043e"}:t.rangeUnderflow?"date"===e.currentTarget.type?{status:"error",message:"\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u0430\u0442\u0443 \u0440\u0430\u043d\u044c\u0448\u0435 1 \u044f\u043d\u0432\u0430\u0440\u044f 2015"}:{status:"error",message:"\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0447\u0438\u0441\u043b\u0430"}:{status:"default",message:null}},ge=function(e){return e.replace(/^\s*/g,"").replace(/\s{2,}/g," ").replace(/<% RGI_Emoji %>|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g,"")},Ce={title:"",sum:"",titleValidation:{},sumValidation:{}},Te=(e,t)=>{switch(t.type){case"CHANGE_STATE":var a=t.payload;return Object(B.a)(Object(B.a)({},e),a);default:return e}},fe=e=>{var t=e.dispatch,a=e.editedItem,o=Object(l.useReducer)(Te,Ce),u=Object(d.a)(o,2),r=u[0],s=u[1],m=Object(l.useState)(()=>a?"/money-box/".concat(a._id):"/money-box"),E=Object(d.a)(m,1)[0],p=re(E),v=Object(d.a)(p,2),D=v[0].response,b=v[1];return Object(l.useEffect)(()=>{D&&(t({type:"SET_ACCOUNTS",payload:{accounts:(null===D||void 0===D?void 0:D.accounts)?null===D||void 0===D?void 0:D.accounts:[]}}),t({type:"SET_BUDGETS",payload:{budgets:(null===D||void 0===D?void 0:D.budgets)?null===D||void 0===D?void 0:D.budgets:[]}}))},[D,t]),Object(l.useEffect)(()=>{a&&s({type:"CHANGE_STATE",payload:Object(B.a)({},a)})},[a]),Object(l.useEffect)(()=>{D&&t({type:"SET_EDITED_ITEM",payload:{item:null}})},[D,t]),n.a.createElement(g.m,{onSubmit:function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,b({method:a?"PATCH":"POST",title:r.title,sum:r.sum});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},n.a.createElement(g.t,{type:"text",placeholder:"\u041a\u0430\u0440\u0442\u0430, \u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0435, \u0441\u0447\u0435\u0442 \u0432 \u0431\u0430\u043d\u043a\u0435",top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:r.title,required:!0,maxLength:"20",status:r.titleValidation.status,bottom:r.titleValidation.message?r.titleValidation.message:"".concat(r.title.length," \u0438\u0437 20"),onChange:e=>s({type:"CHANGE_STATE",payload:{title:ge(e.currentTarget.value),titleValidation:Oe(e)}})}),n.a.createElement(g.t,{type:"number",placeholder:C(0),top:"\u0411\u0430\u043b\u0430\u043d\u0441 \u0441\u0447\u0435\u0442\u0430",value:r.sum,pattern:"[0-9]+([,\\.][0-9]+)?",disabled:!!a,required:!0,status:r.sumValidation.status,inputMode:"decimal",max:999999999,min:0,step:.01,bottom:r.sumValidation.message?r.sumValidation.message:"\u0414\u0435\u043d\u0435\u0436\u043d\u044b\u0435 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430, \u043d\u0430\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u0441\u044f \u043d\u0430 \u0441\u0447\u0435\u0442\u0435 \u0432 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442",onChange:e=>s({type:"CHANGE_STATE",payload:{sum:e.currentTarget.value.replace(/[^\d.]*/,""),sumValidation:Oe(e)}})}),n.a.createElement(g.c,{size:"xl"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))},Se=a(159),je=a.n(Se),_e=e=>e.accounts.map(e=>n.a.createElement("option",{key:e._id,value:e._id},e.title," (",C(e.sum),")")),Ae={account:"",title:"",date:Object(J.a)(new Date,"yyyy-MM-dd"),income:!1,description:"",price:"",quantity:"",tags:[],boxPrice:!1,validate:{account:{},title:{},description:{},price:{},quantity:{},tags:{}}},we=(e,t)=>{switch(t.type){case"CHANGE_STATE":var a=t.payload,l=a.validateForm,n=Object(ae.a)(a,["validateForm"]);return Object(B.a)(Object(B.a)(Object(B.a)({},e),n),{},{validate:Object(B.a)(Object(B.a)({},e.validate),l)});default:return e}},Fe=e=>{var t,a,o,u,r,c,i,s,m,E,p,v,D,b,y,h,O,T,f,S,j,_,A,w,F,x,I,k,H,M,P,G,L,N,V=e.accounts,R=e.id,U=void 0===R?null:R,q=e.editedItem,W=void 0===q?null:q,K=e.dispatch,z=e.budget,Y=e.panel,X=void 0===Y?"":Y,Q=e.shopListItemTitle,Z=e.setShopListItemTitle,$=e.date,ee=Object(l.useState)(()=>W?"/item/".concat(W._id):"/item"),te=Object(d.a)(ee,1)[0],ae=re(te),le=Object(d.a)(ae,2),ne=le[0].response,oe=le[1],ue=Object(l.useReducer)(we,Ae),ce=Object(d.a)(ue,2),ie=ce[0],de=ce[1],se=Object(l.useState)(()=>!!ie.description),me=Object(d.a)(se,2),Ee=me[0],pe=me[1];Object(l.useEffect)(()=>{Ee||pe(!!ie.description)},[ie.description,Ee]),Object(l.useEffect)(()=>{Q&&de({type:"CHANGE_STATE",payload:{title:Q}})},[Q]),Object(l.useEffect)(()=>{W&&(W.date=Object(J.a)(new Date(W.date),"yyyy-MM-dd"),W.boxPrice&&(W.price=Number(W.sum).toFixed(2)),de({type:"CHANGE_STATE",payload:Object(B.a)({},W)}))},[W]),Object(l.useEffect)(()=>{(null===z||void 0===z?void 0:z.title)&&"home"!==X&&de({type:"CHANGE_STATE",payload:{tags:(null===W||void 0===W?void 0:W.tags)||(null===z||void 0===z?void 0:z.title.toLowerCase().split(" "))}})},[z,X,W]),Object(l.useEffect)(()=>{ne&&(K({type:"SET_ACCOUNTS",payload:{accounts:(null===ne||void 0===ne?void 0:ne.accounts)?null===ne||void 0===ne?void 0:ne.accounts:[]}}),K({type:"SET_BUDGETS",payload:{budgets:(null===ne||void 0===ne?void 0:ne.budgets)?null===ne||void 0===ne?void 0:ne.budgets:[]}}),K({type:"SET_EDITED_ITEM",payload:{item:null}}))},[ne,K]);var ve=ie.tags.filter(e=>!!e.length).map((e,t)=>n.a.createElement(g.h,{style:{marginRight:"5px",marginBottom:"5px",maxWidth:"100%",overflow:"hidden",overflowWrap:"normal"},key:t},e));return n.a.createElement(g.m,{onSubmit:e=>{e.preventDefault(),oe({method:W?"PATCH":"POST",date:ie.date,title:ie.title,description:ie.income?"":ie.description,price:ie.boxPrice?(ie.price/ie.quantity).toFixed(4):Number(ie.price).toFixed(2),quantity:ie.quantity,income:ie.income,tags:ie.tags.filter(e=>!!e.length),itemFrom:ie.account||(null===W||void 0===W?void 0:W.itemFrom)||U,boxPrice:ie.boxPrice,params:{date:new Date($),tzOffset:(new Date).getTimezoneOffset()}}),Z("")}},n.a.createElement(g.N,{top:"\u0421\u0447\u0435\u0442",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0447\u0435\u0442",onChange:e=>{de({type:"CHANGE_STATE",payload:{account:e.currentTarget.value,validateForm:{account:Oe(e)}}})},defaultValue:ie.account||(null===W||void 0===W?void 0:W.itemFrom)||U,required:!0,status:null===(t=ie.validate)||void 0===t||null===(a=t.account)||void 0===a?void 0:a.status,bottom:null===(o=ie.validate)||void 0===o||null===(u=o.account)||void 0===u?void 0:u.message},n.a.createElement(_e,{accounts:V})),n.a.createElement(g.t,{type:"date",top:"\u0414\u0430\u0442\u0430",value:ie.date,required:!0,min:"2015-01-01",max:Object(J.a)(new Date,"yyyy-MM-dd"),onChange:e=>{de({type:"CHANGE_STATE",payload:{date:e.currentTarget.value,validateForm:{date:Oe(e)}}})},status:null===(r=ie.validate)||void 0===r||null===(c=r.date)||void 0===c?void 0:c.status,bottom:null===(i=ie.validate)||void 0===i||null===(s=i.date)||void 0===s?void 0:s.message}),n.a.createElement(g.t,{type:"text",placeholder:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442, \u0443\u0441\u043b\u0443\u0433\u0430, \u0442\u043e\u0432\u0430\u0440",value:ie.title,top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,maxLength:20,status:null===(m=ie.validate)||void 0===m||null===(E=m.title)||void 0===E?void 0:E.status,bottom:(null===(p=ie.validate)||void 0===p||null===(v=p.title)||void 0===v?void 0:v.message)?null===(D=ie.validate)||void 0===D||null===(b=D.title)||void 0===b?void 0:b.message:"".concat(ie.title.length," \u0438\u0437 20"),onChange:e=>{de({type:"CHANGE_STATE",payload:{title:ge(e.currentTarget.value),validateForm:{title:Oe(e)}}})}}),n.a.createElement(g.J,{name:"income",value:!1,defaultChecked:!ie.income||null,onClick:()=>{de({type:"CHANGE_STATE",payload:{income:!1}})}},"\u0420\u0430\u0441\u0445\u043e\u0434"),n.a.createElement(g.J,{name:"income",value:!0,defaultChecked:!!ie.income||null,onClick:()=>{de({type:"CHANGE_STATE",payload:{income:!0}}),pe(!1)},disabled:!!Q},"\u0414\u043e\u0445\u043e\u0434"),!ie.income&&n.a.createElement(g.n,{top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"},n.a.createElement(g.c,{type:"button",mode:"secondary",before:n.a.createElement(je.a,null),size:"l",disabled:ie.description||Ee,onClick:()=>{pe(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),(Ee||ie.description)&&n.a.createElement(g.U,{top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430(\u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430, \u0443\u0441\u043b\u0443\u0433\u0438)",value:ie.description,maxLength:70,status:null===(y=ie.validate)||void 0===y||null===(h=y.description)||void 0===h?void 0:h.status,bottom:(null===(O=ie.validate)||void 0===O||null===(T=O.description)||void 0===T?void 0:T.message)?null===(f=ie.validate)||void 0===f||null===(S=f.description)||void 0===S?void 0:S.message:"".concat(ie.description.length," \u0438\u0437 70"),onChange:e=>{de({type:"CHANGE_STATE",payload:{description:ge(e.currentTarget.value),validateForm:{description:Oe(e)}}})}})),n.a.createElement(g.t,{type:"text",top:"\u0422\u0435\u0433\u0438",value:ie.tags.join(" "),placeholder:"\u0422\u0435\u0433\u0438 \u0447\u0435\u0440\u0435\u0437 \u043f\u0440\u043e\u0431\u0435\u043b",status:null===(j=ie.validate)||void 0===j||null===(_=j.tags)||void 0===_?void 0:_.status,maxLength:50,bottom:(null===(A=ie.validate)||void 0===A||null===(w=A.tags)||void 0===w?void 0:w.message)?null===(F=ie.validate)||void 0===F||null===(x=F.tags)||void 0===x?void 0:x.message:"".concat(ie.tags.join(" ").length," \u0438\u0437 50 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),onChange:e=>{de({type:"CHANGE_STATE",payload:{tags:""!==e.currentTarget.value?ge(e.currentTarget.value).toLowerCase().split(" "):[],validateForm:{tags:Oe(e)}}})}}),!!ve.length&&0!==ie.tags.length&&n.a.createElement(g.i,{style:{display:"flex",flexWrap:"wrap"}},ve),n.a.createElement(g.t,{type:"number",placeholder:C(0),pattern:"[0-9]+([,\\.][0-9]+)?",top:"\u0426\u0435\u043d\u0430",inputMode:"decimal",max:99999999,min:0,step:1e-4,status:null===(I=ie.validate)||void 0===I||null===(k=I.price)||void 0===k?void 0:k.status,bottom:null===(H=ie.validate)||void 0===H||null===(M=H.price)||void 0===M?void 0:M.message,value:ie.price,required:!0,onChange:e=>{de({type:"CHANGE_STATE",payload:{price:e.currentTarget.value.replace(/[^\d.]*/,""),validateForm:{price:Oe(e)}}})}}),!ie.income&&n.a.createElement(g.f,{checked:ie.boxPrice,onChange:()=>{de({type:"CHANGE_STATE",payload:{boxPrice:!ie.boxPrice}})}},"\u0426\u0435\u043d\u0430 \u0437\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0443"),n.a.createElement(g.t,{type:"number",placeholder:"0",pattern:"[0-9]+([,\\.][0-9]+)?",top:"\u041a\u043e\u043b-\u0432\u043e",inputMode:"decimal",max:9999999,min:0,step:.001,status:null===(P=ie.validate)||void 0===P||null===(G=P.quantity)||void 0===G?void 0:G.status,bottom:null===(L=ie.validate)||void 0===L||null===(N=L.quantity)||void 0===N?void 0:N.message,value:ie.quantity,required:!0,onChange:e=>{de({type:"CHANGE_STATE",payload:{quantity:e.currentTarget.value.replace(/[^\d.]*/,""),validateForm:{quantity:Oe(e)}}})}}),n.a.createElement(g.c,{size:"xl"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c ".concat(ie.boxPrice?C(ie.price):C(ie.price*ie.quantity))))},xe=a(59),Ie=a.n(xe),Be=a(58),ke=a.n(Be),He=a(77),Me=a.n(He),Pe=e=>{var t=e.color,a=void 0===t?"black":t,l=e.value;return l?n.a.createElement("span",{style:{color:a}},C(l)):null};function Ge(e){return(t,a)=>{if(null===t||void 0===t?void 0:t.caption)return n.a.createElement(g.d,{level:"2",weight:"semibold",caps:!0,key:a},Object(J.a)(new Date(null===t||void 0===t?void 0:t.date),"dd MMMM yyyy ",{locale:Y.a}),n.a.createElement("br",null),(null===t||void 0===t?void 0:t.income)&&(null===t||void 0===t?void 0:t.outcome)?" [ ":null,n.a.createElement(Pe,{value:null===t||void 0===t?void 0:t.income,color:"green"}),(null===t||void 0===t?void 0:t.income)&&(null===t||void 0===t?void 0:t.outcome)?" | ":null,n.a.createElement(Pe,{value:null===t||void 0===t?void 0:t.outcome,color:"red"}),(null===t||void 0===t?void 0:t.income)&&(null===t||void 0===t?void 0:t.outcome)?" ]":null);var l=null===t||void 0===t?void 0:t.tags.filter(e=>!!e.length).map((e,t)=>n.a.createElement("span",{key:t,style:{marginLeft:"5px",marginRight:"5px",marginBottom:"5px",maxWidth:"100%",overflow:"hidden",overflowWrap:"normal"}},n.a.createElement("b",null,e)));return n.a.createElement(g.K,{key:a,multiline:!0,caption:0!==(null===t||void 0===t?void 0:t.tags.length)&&n.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},n.a.createElement("span",null,"\u0422\u0435\u0433\u0438:")," ",l),after:(null===t||void 0===t?void 0:t.income)?C(null===t||void 0===t?void 0:t.sum):C(-1*(null===t||void 0===t?void 0:t.sum)),"data-id":null===t||void 0===t?void 0:t._id,onClick:()=>{e({type:"SET_EDITED_ITEM",payload:{item:t}}),e({type:S,payload:{modal:"add-money"}})}},null===t||void 0===t?void 0:t.title)}}var Le=a(68),Ne=function(e,t){var a=new Date(e.date),l=new Date(t.date);return Object(Le.a)(l,a)},Ve=e=>{var t=e.onSearch,a=Object(l.useState)(""),o=Object(d.a)(a,2),u=o[0],r=o[1],c=Object(l.useRef)(null);return Object(l.useEffect)(()=>{t(u)},[u,t]),n.a.createElement(n.a.Fragment,null,n.a.createElement(g.m,{onSubmit:e=>{e.preventDefault(),c.current.focus()}},n.a.createElement(g.M,{value:u,onChange:e=>{r(e.currentTarget.value.substring(0,20))}})),n.a.createElement("input",{type:"radio",style:{position:"absolute",height:"0",width:"0",top:"0",left:"0"},ref:c}))},Re=e=>{var t,a,o=e.id,u=e.account,r=e.dispatch,s=e.onRefresh,m=e.context,E=e.date,p=e.scheme,v=Object(l.useState)(()=>m),D=Object(d.a)(v,2),b=D[0],h=D[1],O=re("/money-box/".concat(null===u||void 0===u?void 0:u._id)),T=Object(d.a)(O,2),f=T[0].response,j=T[1],_=Object(l.useState)(!0),w=Object(d.a)(_,2),F=w[0],x=w[1],B=Object(l.useState)(()=>u?null===u||void 0===u?void 0:u.operations:[]),k=Object(d.a)(B,2),H=k[0],M=k[1],P=Object(l.useState)(""),G=Object(d.a)(P,2),L=G[0],N=G[1],V=Object(l.useState)(()=>H||[]),R=Object(d.a)(V,2),q=R[0],W=R[1],K=q.sort(Ne).reduce((e,t)=>{var a=+new Date(t.date);return e[a]?e[a]=[...e[a],t]:e[a]=[t],e},{}),z=[];Object.keys(K).forEach(e=>{var t=K[e],a="";K[e].income=0,K[e].outcome=0,t.forEach(t=>{a=t.date,z.splice(0,0,t),t.income?K[e].income+=t.sum:K[e].outcome+=t.sum}),K[e].income=K[e].income.toFixed(2),K[e].outcome=K[e].outcome.toFixed(2),z.splice(0,0,{date:a,income:K[e].income,outcome:K[e].outcome,caption:!0})});var J=z.sort(Ne).map(Ge(r)),Y=()=>{r({type:"SET_TOGGLE_CONTEXT",payload:{context:!b}})},X=n.a.createElement(g.b,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",mode:"destructive",autoclose:!0,action:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(),e.next=3,j({method:"DELETE",params:{date:E}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}],onClose:()=>{Y(),r({type:"SET_POPOUT",payload:{popout:null}})}},n.a.createElement("h2",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0447\u0435\u0442?"),n.a.createElement("p",null,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u0447\u0435\u0442\u0430 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044e \u0432\u0441\u0435\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0434\u043e\u0445\u043e\u0434\u0430\u043c \u0438 \u0440\u0430\u0441\u0445\u043e\u0434\u0430\u043c, \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u043c \u043a \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0441\u0447\u0435\u0442\u0443. \u0421\u0443\u043c\u043c\u044b \u0431\u044e\u0434\u0436\u0435\u0442\u043e\u0432 \u043c\u043e\u0433\u0443\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e.")),Q=n.a.createElement(g.E,{opened:b,onClose:Y},n.a.createElement(g.u,null,n.a.createElement(g.e,{before:n.a.createElement(Me.a,null),onClick:()=>{r({type:"SET_EDITED_ITEM",payload:{item:u}}),r({type:S,payload:{modal:"add-account"}}),Y()}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0447\u0435\u0442"),n.a.createElement(g.e,{before:n.a.createElement(ke.a,null),onClick:()=>{r({type:"SET_POPOUT",payload:{popout:X,alert:!0}})}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0447\u0435\u0442 ",null===u||void 0===u?void 0:u.title))),Z=n.a.createElement(g.E,{opened:b,onClose:Y},n.a.createElement(g.u,null,n.a.createElement(g.e,{before:n.a.createElement(A.a,null),onClick:()=>{r({type:"SET_EDITED_ITEM",payload:{item:null}}),r({type:S,payload:{modal:"add-money"}}),Y()}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),n.a.createElement(g.e,{before:n.a.createElement(I.a,null),onClick:()=>{r({type:S,payload:{modal:"transfer-money"}}),Y()}},"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438"))),$=F?Q:Z;Object(l.useEffect)(()=>{u&&(M(null===u||void 0===u?void 0:u.operations),W(null===u||void 0===u?void 0:u.operations))},[u]),Object(l.useEffect)(()=>{f&&(r({type:"SET_POPOUT",payload:{popout:null}}),r({type:"SET_EDITED_ITEM",payload:{item:null}}),r({type:"SET_ACCOUNTS",payload:{accounts:(null===f||void 0===f?void 0:f.accounts)?null===f||void 0===f?void 0:f.accounts:[]}}),r({type:"SET_BUDGETS",payload:{budgets:(null===f||void 0===f?void 0:f.budgets)?null===f||void 0===f?void 0:f.budgets:[]}}),r({type:"SET_HISTORY_BACK"}))},[r,f]),Object(l.useEffect)(()=>{h(m)},[m]),Object(l.useEffect)(()=>{W(""===L?H:null===u||void 0===u?void 0:u.operations.filter(e=>e.title.toLowerCase().indexOf(L.toLowerCase())>-1))},[L,u,H]);var te=null===u||void 0===u||null===(t=u.operations)||void 0===t?void 0:t.filter(e=>!!e.income).reduce((e,t)=>e+t.sum,0),ae=null===u||void 0===u||null===(a=u.operations)||void 0===a?void 0:a.filter(e=>!e.income).reduce((e,t)=>e+t.sum,0);return n.a.createElement(g.z,{id:o},n.a.createElement(g.A,{left:n.a.createElement(n.a.Fragment,null,n.a.createElement(g.B,{onClick:()=>{r({type:"SET_HISTORY_BACK"}),r({type:"SET_EDITED_ITEM",payload:{item:null}})}}),n.a.createElement(g.C,{onClick:()=>{x(!1),Y()}},n.a.createElement(A.a,null)))},n.a.createElement(g.D,{aside:u&&n.a.createElement(Ie.a,{style:{transform:"rotate(".concat(b?"180deg":"0",")")}}),onClick:()=>{x(!0),Y()}},u?null===u||void 0===u?void 0:u.title:"\u0421\u0447\u0435\u0442 \u0443\u0434\u0430\u043b\u0451\u043d")),u&&n.a.createElement(n.a.Fragment,null,$,n.a.createElement(ee,{onRefresh:s}),n.a.createElement(Ve,{onSearch:e=>{N(e)}}),n.a.createElement(y.a,{header:n.a.createElement(g.q,{mode:"secondary"},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u043e \u0441\u0447\u0435\u0442\u0443"),separator:"show"},n.a.createElement(g.o,{slideWidth:"100%",bullets:"client_light"===p||"bright_light"===p?"dark":"light",style:{height:"auto"}},n.a.createElement(g.i,null,n.a.createElement(g.V,{level:"3",weight:"semibold"},"\u041e\u0441\u0442\u0430\u0442\u043e\u043a \u043f\u043e \u0441\u0447\u0435\u0442\u0443"),n.a.createElement(g.V,{level:"1",weight:"bold",style:{marginBottom:16}},C(null===u||void 0===u?void 0:u.sum))),n.a.createElement(g.i,null,n.a.createElement(g.V,{level:"3",weight:"semibold",style:{marginBottom:16}},"\u0414\u043e\u0445\u043e\u0434: ",C(te||0)),n.a.createElement(g.V,{level:"3",weight:"semibold",style:{marginBottom:16}},"\u0420\u0430\u0441\u0445\u043e\u0434: ",C(-1*ae||0)),n.a.createElement(g.V,{level:"3",weight:"semibold",style:{marginBottom:16}},"\u0411\u0430\u043b\u0430\u043d\u0441: ",C(te-ae)))),0===(null===u||void 0===u?void 0:u.operations.length)&&n.a.createElement(g.l,null,"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u043f\u043e \u0441\u0447\u0435\u0442\u0443 \u0435\u0449\u0435 \u043d\u0435 \u0431\u044b\u043b\u043e"),n.a.createElement(g.i,null,J,0===J.length&&n.a.createElement(g.l,null,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"))),n.a.createElement(U,null)))},Ue=e=>{var t=e.id,a=e.budgets,o=e.dispatch,u=e.date,r=void 0===u?new Date:u,c=e.onRefresh,i=e.bannerData,d=e.setBannerData;return Object(l.useEffect)(()=>{ie.a.send("VKWebAppGetAds",{})},[]),n.a.createElement(g.z,{id:t},n.a.createElement(g.A,{left:n.a.createElement(g.C,{onClick:()=>o({type:S,payload:{modal:"add-budget"}})},n.a.createElement(F.a,null))},"\u0411\u044e\u0434\u0436\u0435\u0442\u044b"),n.a.createElement(ee,{onRefresh:c}),n.a.createElement(g.p,{header:n.a.createElement(g.q,{mode:"secondary"},"\u0412\u0430\u0448\u0438 \u0431\u044e\u0434\u0436\u0435\u0442\u044b \u043d\u0430 ",Object(J.a)(new Date(r),"dd MMMM yyyy",{locale:Y.a}))},n.a.createElement(j,{data:a,dispatch:o,showAll:!0,itemsName:"budgets",needHide:!1}),n.a.createElement(g.l,null,"\u0426\u0438\u0444\u0440\u044b \u043d\u0430\u043f\u0440\u043e\u0442\u0438\u0432 \u0431\u044e\u0434\u0436\u0435\u0442\u0430 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0442 \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0435\u0449\u0435 \u043f\u043e\u0442\u0440\u0430\u0442\u0438\u0442\u044c, \u043d\u043e \u043f\u043e\u043c\u043d\u0438\u0442\u0435, \u0447\u0442\u043e \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0441\u043c\u0435\u0436\u043d\u044b\u0435 \u0442\u0440\u0430\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0442\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u043a \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u0431\u044e\u0434\u0436\u0435\u0442\u0430\u043c. \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0439\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u043e.")),n.a.createElement(g.k,{vertical:"bottom"},i&&n.a.createElement(g.H,{bannerData:i,onClose:()=>d(null)})),n.a.createElement(U,null))},qe={title:"",startSum:"",validate:{title:{},startSum:{}}},We=(e,t)=>{switch(t.type){case"CHANGE_STATE":var a=t.payload,l=a.validateForm,n=Object(ae.a)(a,["validateForm"]);return Object(B.a)(Object(B.a)(Object(B.a)({},e),n),{},{validate:Object(B.a)(Object(B.a)({},e.validate),l)});default:return e}},Ke=e=>{var t,a,o,u,r,s,m,E,p,v,D,b,y=e.dispatch,h=e.editedItem,O=void 0===h?null:h,T=e.date,f=Object(l.useReducer)(We,qe),S=Object(d.a)(f,2),j=S[0],_=S[1],A=Object(l.useState)(()=>O?"/budget/".concat(O._id):"/budget"),w=Object(d.a)(A,1)[0],F=re(w),x=Object(d.a)(F,2),I=x[0].response,k=x[1];return Object(l.useEffect)(()=>{O&&(I||_({type:"CHANGE_STATE",payload:Object(B.a)({},O)}))},[O,_,I]),Object(l.useEffect)(()=>{I&&(y({type:"SET_ACCOUNTS",payload:{accounts:(null===I||void 0===I?void 0:I.accounts)?null===I||void 0===I?void 0:I.accounts:[]}}),y({type:"SET_BUDGETS",payload:{budgets:(null===I||void 0===I?void 0:I.budgets)?null===I||void 0===I?void 0:I.budgets:[]}}),y({type:"SET_EDITED_ITEM",payload:{item:null}}))},[I,y]),n.a.createElement(g.m,{onSubmit:function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,k({method:O?"PATCH":"POST",title:j.title,sum:j.startSum,params:{date:new Date(T)}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},n.a.createElement(g.t,{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u044e\u0434\u0436\u0435\u0442\u0430",top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:j.title,required:!0,maxLength:"20",status:null===(t=j.validate)||void 0===t||null===(a=t.title)||void 0===a?void 0:a.status,bottom:(null===(o=j.validate)||void 0===o||null===(u=o.title)||void 0===u?void 0:u.message)?null===(r=j.validate)||void 0===r||null===(s=r.title)||void 0===s?void 0:s.message:"".concat(j.title.length," \u0438\u0437 20"),onChange:e=>_({type:"CHANGE_STATE",payload:{title:ge(e.currentTarget.value),validateForm:{title:Oe(e)}}})}),n.a.createElement(g.t,{type:"number",placeholder:C(0),top:"\u0411\u044e\u0434\u0436\u0435\u0442 \u0432 \u0440\u0443\u0431\u043b\u044f\u0445",value:j.startSum,pattern:"[0-9]+([,\\.][0-9]+)?",inputMode:"decimal",required:!0,status:null===(m=j.validate)||void 0===m||null===(E=m.startSum)||void 0===E?void 0:E.status,min:0,max:999999999,step:.01,bottom:(null===(p=j.validate)||void 0===p||null===(v=p.startSum)||void 0===v?void 0:v.message)?null===(D=j.validate)||void 0===D||null===(b=D.startSum)||void 0===b?void 0:b.message:"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u044b \u0433\u043e\u0442\u043e\u0432\u044b \u043d\u0430 \u044d\u0442\u043e \u043f\u043e\u0442\u0440\u0430\u0442\u0438\u0442\u044c?",onChange:e=>_({type:"CHANGE_STATE",payload:{startSum:e.currentTarget.value,validateForm:{startSum:Oe(e)}}})}),n.a.createElement(g.c,{size:"xl"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))},ze=a(161),Je=a.n(ze),Ye=a(162),Xe=a.n(Ye),Qe=a(163),Ze=a.n(Qe),$e=a(160),et=function(e,t){var a;return Object($e.a)(new Date(null===(a=e[e.length-1])||void 0===a?void 0:a.date),new Date(t.date))?[...e,t]:[...e,{date:t.date,caption:!0},t]},tt=a(343),at=e=>{var t=e.id,a=e.budget,o=e.dispatch,u=e.context,r=e.date,s=Object(l.useState)(()=>u),m=Object(d.a)(s,2),E=m[0],p=m[1],v=re("/budget/".concat(null===a||void 0===a?void 0:a._id)),D=Object(d.a)(v,2),b=D[0].response,y=D[1],h=Object(l.useState)(()=>null===a||void 0===a?void 0:a.items),O=Object(d.a)(h,2),T=O[0],f=O[1],j=Object(l.useState)(()=>T),_=Object(d.a)(j,2),w=_[0],F=_[1],x=Object(l.useState)(""),I=Object(d.a)(x,2),B=I[0],k=I[1];Object(l.useEffect)(()=>{f(null===a||void 0===a?void 0:a.items),F(null===a||void 0===a?void 0:a.items)},[a]),Object(l.useEffect)(()=>{b&&((null===b||void 0===b?void 0:b.deletedCount)&&(o({type:"SET_HISTORY_BACK"}),o({type:"SET_EDITED_ITEM",payload:{item:null}})),o({type:"SET_ACCOUNTS",payload:{accounts:(null===b||void 0===b?void 0:b.accounts)?null===b||void 0===b?void 0:b.accounts:[]}}),o({type:"SET_BUDGETS",payload:{budgets:(null===b||void 0===b?void 0:b.budgets)?null===b||void 0===b?void 0:b.budgets:[]}}))},[b,o]),Object(l.useEffect)(()=>{p(u)},[u]),Object(l.useEffect)(()=>{F(""===B?T:a.items.filter(e=>e.title.toLowerCase().indexOf(B.toLowerCase())>-1))},[B,a,T]);var H=()=>{o({type:"SET_TOGGLE_CONTEXT",payload:{context:!E}})},M=n.a.createElement(g.b,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",mode:"destructive",autoclose:!0,action:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return H(),e.next=3,y({method:"DELETE",params:{date:r}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}],onClose:()=>{H(),o({type:"SET_POPOUT",payload:{popout:null}})}},n.a.createElement("h2",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442?"),n.a.createElement("p",null,"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442?")),P=w&&w.sort(Ne).reduce(et,[]).map(Ge(o));return n.a.createElement(g.z,{id:t},n.a.createElement(g.A,{left:n.a.createElement(n.a.Fragment,null,n.a.createElement(g.B,{onClick:()=>{o({type:"SET_HISTORY_BACK"})}}),0===Object(tt.a)(new Date,new Date(r))&&n.a.createElement(g.C,{onClick:()=>{o({type:"SET_EDITED_ITEM",payload:{item:null}}),o({type:S,payload:{modal:"add-money"}})}},n.a.createElement(A.a,null)))},n.a.createElement(g.D,{aside:a&&n.a.createElement(Ie.a,{style:{transform:"rotate(".concat(E?"180deg":"0",")")}}),onClick:H},a?null===a||void 0===a?void 0:a.title:"\u0411\u044e\u0434\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u0451\u043d")),a&&n.a.createElement(n.a.Fragment,null,n.a.createElement(g.E,{opened:E,onClose:H},n.a.createElement(g.u,null,n.a.createElement(g.e,{before:n.a.createElement(Me.a,null),onClick:()=>{o({type:"SET_EDITED_ITEM",payload:{item:a}}),o({type:S,payload:{modal:"add-budget"}}),H()}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442 ",null===a||void 0===a?void 0:a.title),n.a.createElement(g.e,{before:n.a.createElement(ke.a,null),onClick:()=>{o({type:"SET_POPOUT",payload:{popout:M,alert:!0}})}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442 ",null===a||void 0===a?void 0:a.title))),n.a.createElement(Ve,{onSearch:e=>{k(e)}}),n.a.createElement(g.p,null,n.a.createElement(g.v,{before:n.a.createElement(Je.a,null),mode:"base"},"\u041f\u0435\u0440\u0432\u043e\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 ",C(a.startSum)),n.a.createElement(g.v,{before:n.a.createElement(Xe.a,null),mode:"base"},"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u0431\u044e\u0434\u0436\u0435\u0442 ",C(a.items.map(e=>e.income?e.sum:0).reduce((e,t)=>e+t,0))),n.a.createElement(g.v,{before:n.a.createElement(Ze.a,null),mode:"base"},"\u041f\u043e\u0442\u0440\u0430\u0447\u0435\u043d\u043e ",C(a.items.map(e=>e.income?0:e.sum).reduce((e,t)=>e+t,0)))),n.a.createElement(g.i,null,P,0===(null===P||void 0===P?void 0:P.length)&&n.a.createElement(g.l,null,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f")),n.a.createElement(U,null)))},lt=e=>{var t=e.id,a=e.accounts,o=e.onRefresh,u=Object(l.useState)(()=>a.map(e=>e.operations).flat().filter(e=>!e.income).sort((e,t)=>e.title.localeCompare(t.title))),r=Object(d.a)(u,2),c=r[0],i=r[1],s=Object(l.useState)(""),m=Object(d.a)(s,2),E=m[0],p=m[1],v=Object(l.useState)(()=>c),D=Object(d.a)(v,2),b=D[0],y=D[1],h=b.reduce((e,t)=>{var a;if((null===(a=e[e.length-1])||void 0===a?void 0:a.title)===t.title){var l=e[e.length-1];return l.sum=l.sum+t.sum,l.quantity+=t.quantity,[...[...e.slice(0,e.length-1),l]]}return[...e,{title:t.title,sum:t.sum,quantity:t.quantity}]},[]).map((e,t)=>n.a.createElement(g.K,{disabled:!0,key:t,multiline:!0,caption:"\u041a\u043e\u043b-\u0432\u043e: ".concat((null===e||void 0===e?void 0:e.quantity).toFixed(3)," | \u0421\u0440. \u0446\u0435\u043d\u0430: ").concat(C(((null===e||void 0===e?void 0:e.sum)/(null===e||void 0===e?void 0:e.quantity)).toFixed(2))),after:C(null===e||void 0===e?void 0:e.sum),"data-title":null===e||void 0===e?void 0:e.title},null===e||void 0===e?void 0:e.title));Object(l.useEffect)(()=>{var e=a.map(e=>e.operations).flat().filter(e=>!e.income).sort((e,t)=>e.title.localeCompare(t.title));i(e),y(e)},[a]),Object(l.useEffect)(()=>{y(""===E?a.map(e=>e.operations).flat().filter(e=>!e.income).sort((e,t)=>e.title.localeCompare(t.title)):a.map(e=>e.operations).flat().filter(e=>!e.income).sort((e,t)=>e.title.localeCompare(t.title)).filter(e=>e.title.toLowerCase().indexOf(E.toLowerCase())>-1))},[E,a]);return n.a.createElement(g.z,{id:t},n.a.createElement(g.A,null,"\u0421\u0432\u043e\u0434\u043a\u0430"),n.a.createElement(ee,{onRefresh:o}),n.a.createElement(Ve,{onSearch:e=>{p(e)}}),n.a.createElement(g.p,null,h,0===h.length&&n.a.createElement(g.l,null,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f")))},nt=a(164),ot=a.n(nt),ut=e=>{var t=e.id,a=e.dispatch,l=e.loading,o=e.bannerData,u=e.setBannerData;return n.a.createElement(g.z,{id:t},n.a.createElement(g.F,{icon:l?n.a.createElement(g.Q,{size:"large"}):n.a.createElement(ot.a,null),action:!l&&n.a.createElement(g.c,{onClick:()=>{a({type:"SET_ACTIVE_VIEW",payload:{view:"home",panel:"home"}})},id:"initial-button"},"\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c"),stretched:!0},l?"\u041f\u043e\u0434\u0433\u043e\u0442\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043a \u0437\u0430\u043f\u0443\u0441\u043a\u0443":"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0433\u043e\u0442\u043e\u0432\u043e"),n.a.createElement(g.k,{vertical:"bottom"},o&&n.a.createElement(g.H,{bannerData:o,onClose:()=>u(null)})))},rt=(a(332),a(166)),ct=a.n(rt),it=a(167),dt=a.n(it),st=a(168),mt=a.n(st),Et=a(165),pt=a.n(Et),vt=e=>{var t=e.id,a=e.dispatch,o=e.bannerData,u=e.setBannerData,r=e.addToHomeScreenSupported,c=e.addedToHomeScreen,i=Object(l.useState)(0),s=Object(d.a)(i,2),m=s[0],E=s[1],p=new URL(window.location.href).searchParams.get("vk_user_id");return Object(l.useEffect)(()=>{ie.a.send("VKWebAppGetAds",{})},[]),n.a.createElement(g.z,{id:t},n.a.createElement(g.A,null,"\u0415\u0449\u0451"),n.a.createElement(g.p,null,n.a.createElement(g.e,{expandable:!0,before:n.a.createElement(pt.a,null),onClick:()=>{a({type:"SET_ACTIVE_VIEW",payload:{view:"more",panel:"shop-list"}})}},"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043a\u0443\u043f\u043e\u043a")),n.a.createElement(g.p,{header:n.a.createElement(g.q,{mode:"secondary"},"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e")},n.a.createElement(g.e,{expandable:!0,before:n.a.createElement(ct.a,null),onClick:()=>{+new Date-m>1e3&&(ie.a.send("VKWebAppShare",{link:"https://vk.com/zlabz_balance#ref=".concat(p)}),E(+new Date))}},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f"),n.a.createElement(g.e,{expandable:!0,before:n.a.createElement(dt.a,null),onClick:()=>{+new Date-m>1e3&&(ie.a.send("VKWebAppJoinGroup",{group_id:195358095}),E(+new Date))}},"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u043a \u0411\u0430\u043b\u0430\u043d\u0441\u0443"),r&&!c&&n.a.createElement(g.e,{expandable:!0,before:n.a.createElement(mt.a,null),onClick:()=>{ie.a.send("VKWebAppAddToHomeScreen")}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u044d\u043a\u0440\u0430\u043d")),"3479465"===p&&n.a.createElement(g.p,{header:n.a.createElement(g.q,{mode:"secondary"},"Admin Mode")},n.a.createElement(g.e,{expandable:!0,onClick:()=>{a({type:"SET_ACTIVE_VIEW",payload:{view:"more",panel:"stats"}})}},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430")),n.a.createElement(g.k,{vertical:"bottom"},n.a.createElement(U,null),o&&n.a.createElement(g.H,{bannerData:o,onClose:()=>u(null)})))},Dt=a(169),bt=a.n(Dt),yt={list:[],item:{id:1,title:"",done:!1},id:null,validate:{title:{}}},ht=(e,t)=>{switch(t.type){case"INITIAL_LIST":var a=t.payload.list[t.payload.list.length-1]?t.payload.list[t.payload.list.length-1].id:1;return Object(B.a)(Object(B.a)({},e),{},{list:t.payload.list,item:{id:a+1,title:"",done:!1}});case"SET_TITLE":var l=t.payload,n=l.validateForm,o=l.title,u={id:e.item.id,title:o,done:!1};return Object(B.a)(Object(B.a)({},e),{},{item:u,validate:Object(B.a)(Object(B.a)({},e.validate),n)});case"SET_ID":return Object(B.a)(Object(B.a)({},e),{},{id:t.payload.id});case"SET_ITEM_TO_LIST":var r=[...e.list,e.item],c=r[r.length-1]?r[r.length-1].id:1;return Object(B.a)(Object(B.a)({},e),{},{list:r,item:{title:"",done:!1,id:c+1},validate:{title:{}}});case"SET_DONE":var i=e.list,d=t.payload.id,s=i.findIndex(e=>e.id===d);return-1!==s&&(i[s].done=!i[s].done),Object(B.a)(Object(B.a)({},e),{},{list:i});case"DELETE_ITEM":var m=e.list,E=t.payload.id,p=m.findIndex(e=>e.id===E);return m.splice(p,1),0===m.length&&localStorage.removeItem("shopList"),Object(B.a)(Object(B.a)({},e),{},{list:m});default:return e}},Ot=e=>{var t,a,o,u,r,c,i=e.id,s=e.dispatch,m=e.shopListFromServer,E=e.setShopListItemTitle,p=e.setShopList,v=e.context,D=e.success,b=Object(l.useReducer)(ht,yt),y=Object(d.a)(b,2),h=y[0],O=y[1],C=Object(l.useState)(()=>v),T=Object(d.a)(C,2),f=T[0],j=T[1],_=Object(l.useState)(!1),A=Object(d.a)(_,2),w=A[0],F=A[1],x=m.length?h.list.map(e=>n.a.createElement(g.e,{key:e.id,selectable:!w,removable:w,checked:e.done,disabled:!w&&e.done,onChange:()=>{E(m[m.findIndex(t=>t.id===e.id)].title),O({type:"SET_ID",payload:{id:e.id}}),s({type:"SET_SUCCESS_MESSAGE",payload:{message:null}}),s({type:S,payload:{modal:"add-money"}})},onRemove:()=>{O({type:"DELETE_ITEM",payload:{id:e.id}}),p(h.list)}},e.title)):n.a.createElement(g.l,null,"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043a\u0443\u043f\u043e\u043a \u043f\u0443\u0441\u0442"),I=()=>{s({type:"SET_TOGGLE_CONTEXT",payload:{context:!f}})};return Object(l.useEffect)(()=>{j(v)},[v]),Object(l.useEffect)(()=>{O({type:"INITIAL_LIST",payload:{list:m}})},[m]),Object(l.useEffect)(()=>{0!==h.list.length&&p(h.list)},[h.list,p]),Object(l.useEffect)(()=>{D&&O({type:"SET_DONE",payload:{id:h.id}})},[D,h.id]),n.a.createElement(g.z,{id:i},n.a.createElement(g.A,{left:n.a.createElement(g.B,{onClick:()=>{s({type:"SET_HISTORY_BACK"})}})},n.a.createElement(g.D,{aside:n.a.createElement(Ie.a,{style:{transform:"rotate(".concat(f?"180deg":"0",")")}}),onClick:I},"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043a\u0443\u043f\u043e\u043a")),n.a.createElement(g.E,{opened:f,onClose:I},n.a.createElement(g.u,null,!w&&n.a.createElement(g.e,{before:n.a.createElement(ke.a,null),onClick:()=>{I(),F(!0)}},"\u0420\u0435\u0436\u0438\u043c \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f"),w&&n.a.createElement(g.e,{before:n.a.createElement(bt.a,null),onClick:()=>{I(),F(!1)}},"\u0420\u0435\u0436\u0438\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"))),n.a.createElement(g.m,{onSubmit:e=>{e.preventDefault(),O({type:"SET_ITEM_TO_LIST"})}},n.a.createElement(g.t,{type:"text",disabled:w,placeholder:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442, \u0443\u0441\u043b\u0443\u0433\u0430, \u0442\u043e\u0432\u0430\u0440",value:h.item.title,top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,maxLength:20,status:null===(t=h.validate)||void 0===t||null===(a=t.title)||void 0===a?void 0:a.status,bottom:(null===(o=h.validate)||void 0===o||null===(u=o.title)||void 0===u?void 0:u.message)?null===(r=h.validate)||void 0===r||null===(c=r.title)||void 0===c?void 0:c.message:"".concat(h.item.title.length," \u0438\u0437 20"),onChange:e=>{O({type:"SET_TITLE",payload:{title:ge(e.currentTarget.value),validateForm:{title:Oe(e)}}})}})),n.a.createElement(g.u,null,x),n.a.createElement(U,null))},gt=a(338),Ct=a(339),Tt=a(340),ft=a(341),St=(e,t)=>null===e||void 0===e?void 0:e.map(e=>e.sessionData.filter(e=>e.userAgent===t)).flat(),jt=e=>{var t=e.id,a=Object(l.useState)(()=>Object(J.a)(new Date,"yyyy-MM-dd")),o=Object(d.a)(a,2),u=o[0],r=o[1],c=re("/user-session-data-ts"),i=Object(d.a)(c,2),s=i[0].response,m=i[1],E=((e,t)=>{var a=t.ts?Object(gt.a)(+new Date(e)):Object(gt.a)(new Date(e)),l=t.ts?Object(Ct.a)(+new Date(e)):Object(Ct.a)(new Date(e)),n=t.ts?Object(Tt.a)(+new Date(e)):Object(Tt.a)(new Date(e)),o=t.ts?Object(ft.a)(+new Date(e)):Object(ft.a)(new Date(e));return t.month?{begin:n,end:o}:{begin:a,end:l}})(+new Date(u),{ts:!0,day:!0,month:!1}),p=s&&s.filter(e=>+new Date(e.createdAt)>E.begin&&E.end>+new Date(e.createdAt)),v=null===s||void 0===s?void 0:s.map(e=>{var t=e.sessionData.filter(e=>e.timeStamp>E.begin&&e.timeStamp<E.end),a=e;return a.sessionData=t,a}),D=St(v,"mobile_android"),b=St(v,"mobile_iphone"),y=St(v,"mobile_web"),h=St(v,"desktop_web"),O=St(v,"mobile_android_messenger"),C=St(v,"mobile_iphone_messenger");return n.a.createElement(g.z,{id:t},n.a.createElement(g.A,null,"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"),n.a.createElement(g.m,{onSubmit:e=>{e.preventDefault(),m({method:"GET",params:{ts:+new Date(u)}})}},n.a.createElement(g.t,{type:"date",value:u,onChange:e=>{r(e.currentTarget.value)}}),n.a.createElement(g.c,null,"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435")),n.a.createElement(g.p,null,n.a.createElement(g.q,{mode:"secondary"},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u0437\u0430 ",u),n.a.createElement(g.O,{multiline:!0},n.a.createElement(g.s,{header:"\u041d\u043e\u0432\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434"},null===p||void 0===p?void 0:p.length)),n.a.createElement(g.O,{multiline:!0},n.a.createElement(g.s,{header:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434"},null===s||void 0===s?void 0:s.length)),n.a.createElement(g.O,{multiline:!0},n.a.createElement(g.s,{header:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432 Android \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434"},null===D||void 0===D?void 0:D.length)),n.a.createElement(g.O,{multiline:!0},n.a.createElement(g.s,{header:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432 Iphone \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434"},null===b||void 0===b?void 0:b.length)),n.a.createElement(g.O,{multiline:!0},n.a.createElement(g.s,{header:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432 Desktop \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434"},null===h||void 0===h?void 0:h.length)),n.a.createElement(g.O,{multiline:!0},n.a.createElement(g.s,{header:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432 Mobile Web \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434"},null===y||void 0===y?void 0:y.length)),n.a.createElement(g.O,{multiline:!0},n.a.createElement(g.s,{header:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432 Android Messenger \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434"},null===O||void 0===O?void 0:O.length)),n.a.createElement(g.O,{multiline:!0},n.a.createElement(g.s,{header:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432 Iphone Messenger \u0437\u0430 \u043f\u0435\u0440\u0438\u043e\u0434"},null===C||void 0===C?void 0:C.length))))},_t={to:"",from:"",date:Object(J.a)(new Date,"yyyy-MM-dd"),title:"",price:""},At=(e,t)=>{switch(t.type){case"CHANGE_STATE":var a=t.payload,l=a.validateForm,n=Object(ae.a)(a,["validateForm"]);return Object(B.a)(Object(B.a)(Object(B.a)({},e),n),{},{validate:Object(B.a)(Object(B.a)({},e.validate),l)});default:return e}},wt=e=>{var t,a,o,u,r,c,i,s,m,E,p,v,D,b,y,h,O,T,f,S,j,_,A=e.accounts,w=e.dispatch,F=re("/money-box/transfer"),x=Object(d.a)(F,2),I=x[0].response,B=x[1],k=Object(l.useReducer)(At,_t),H=Object(d.a)(k,2),M=H[0],P=H[1];Object(l.useEffect)(()=>{I&&(w({type:"SET_ACCOUNTS",payload:{accounts:(null===I||void 0===I?void 0:I.accounts)?null===I||void 0===I?void 0:I.accounts:[]}}),w({type:"SET_BUDGETS",payload:{budgets:(null===I||void 0===I?void 0:I.budgets)?null===I||void 0===I?void 0:I.budgets:[]}}))},[I,w]);var G=A.find(e=>e._id===M.from),L=A.filter(e=>e._id!==M.to),N=A.filter(e=>e._id!==M.from);return n.a.createElement(g.m,{onSubmit:e=>{e.preventDefault(),B({method:"POST",date:M.date,title:M.title,to:M.to,from:M.from,price:M.price})}},n.a.createElement(g.t,{type:"date",top:"\u0414\u0430\u0442\u0430",value:M.date,required:!0,min:"2015-01-01",max:Object(J.a)(new Date,"yyyy-MM-dd"),onChange:e=>{P({type:"CHANGE_STATE",payload:{date:e.currentTarget.value,validateForm:{date:Oe(e)}}})},status:null===(t=M.validate)||void 0===t||null===(a=t.date)||void 0===a?void 0:a.status,bottom:null===(o=M.validate)||void 0===o||null===(u=o.date)||void 0===u?void 0:u.message}),n.a.createElement(g.N,{top:"\u0421\u0447\u0435\u0442 \u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0447\u0435\u0442",onChange:e=>{P({type:"CHANGE_STATE",payload:{from:e.currentTarget.value,validateForm:{from:Oe(e)}}})},defaultValue:M.from,required:!0,status:null===(r=M.validate)||void 0===r||null===(c=r.from)||void 0===c?void 0:c.status,bottom:null===(i=M.validate)||void 0===i||null===(s=i.from)||void 0===s?void 0:s.message},n.a.createElement(_e,{accounts:L})),n.a.createElement(g.N,{top:"\u0421\u0447\u0435\u0442 \u0437\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u044f",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0447\u0435\u0442",onChange:e=>{P({type:"CHANGE_STATE",payload:{to:e.currentTarget.value,validateForm:{to:Oe(e)}}})},defaultValue:M.to,required:!0,status:null===(m=M.validate)||void 0===m||null===(E=m.to)||void 0===E?void 0:E.status,bottom:null===(p=M.validate)||void 0===p||null===(v=p.to)||void 0===v?void 0:v.message},n.a.createElement(_e,{accounts:N})),n.a.createElement(g.t,{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430",value:M.title,top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,maxLength:20,status:null===(D=M.validate)||void 0===D||null===(b=D.title)||void 0===b?void 0:b.status,bottom:(null===(y=M.validate)||void 0===y||null===(h=y.title)||void 0===h?void 0:h.message)?null===(O=M.validate)||void 0===O||null===(T=O.title)||void 0===T?void 0:T.message:"".concat(M.title.length," \u0438\u0437 20"),onChange:e=>{P({type:"CHANGE_STATE",payload:{title:ge(e.currentTarget.value),validateForm:{title:Oe(e)}}})}}),n.a.createElement(g.t,{type:"number",placeholder:C(0),pattern:"[0-9]+([,\\.][0-9]+)?",top:"\u0426\u0435\u043d\u0430",inputMode:"decimal",max:(null===G||void 0===G?void 0:G.sum)||99999999,min:0,step:1e-4,status:null===(f=M.validate)||void 0===f||null===(S=f.price)||void 0===S?void 0:S.status,bottom:null===(j=M.validate)||void 0===j||null===(_=j.price)||void 0===_?void 0:_.message,value:M.price,required:!0,onChange:e=>{P({type:"CHANGE_STATE",payload:{price:e.currentTarget.value.replace(/[^\d.]*/,""),validateForm:{price:Oe(e)}}})}}),n.a.createElement(g.c,{size:"xl"},"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438 ".concat(C(M.price))))},Ft=()=>{var e,t=Object(g.X)(),a=re("/state"),o=Object(d.a)(a,2),u=o[0],r=u.response,s=u.isLoading,E=o[1],p=Object(l.useState)(!0),v=Object(d.a)(p,2),D=v[0],b=v[1],y=Object(l.useContext)(P),h=Object(d.a)(y,2),O=h[0],C=h[1],T=Object(l.useState)(0),f=Object(d.a)(T,2),j=f[0],_=f[1],A=Object(l.useState)(null),w=Object(d.a)(A,2),F=w[0],x=w[1],I=Object(l.useState)(""),B=Object(d.a)(I,2),k=B[0],H=B[1],M=((e,t)=>{var a=Object(l.useState)(()=>{try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(l){return console.log(l),t}}),n=Object(d.a)(a,2),o=n[0],u=n[1];return[o,t=>{try{var a=t instanceof Function?t(o):t;u(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(l){console.log(l)}}]})("shopList",[]),G=Object(d.a)(M,2),L=G[0],N=G[1],V=Object(l.useState)(!1),R=Object(d.a)(V,2),U=R[0],q=R[1],W=Object(l.useState)(!1),K=Object(d.a)(W,2),z=K[0],J=K[1];Object(l.useEffect)(()=>{ie.a.subscribe(e=>{var t=e.detail,a=t.type,l=t.data;"VKWebAppUpdateConfig"===a&&C({type:"SET_COLOR_SCHEME",payload:{scheme:l.scheme}}),"VKWebAppGetAdsResult"===a&&x(l),"VKWebAppAddToHomeScreenInfoResult"===a&&(q(l.is_feature_supported),J(l.is_added_to_home_screen)),"VKWebAppAddToHomeScreenResult"===a&&l.result&&J(l.result),"VKWebAppJoinGroupResult"===a&&l.result&&C({type:"SET_SUCCESS_MESSAGE",payload:{message:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0447\u0442\u043e \u0412\u044b \u0441 \u043d\u0430\u043c\u0438 \u2764\ufe0f"}})}),ie.a.send("VKWebAppInit",{}),ie.a.send("VKWebAppGetAds",{}),ie.a.send("VKWebAppAddToHomeScreenInfo")},[C]);var Y=n.a.createElement(g.b,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"},{title:"\u0412\u044b\u0439\u0442\u0438",mode:"destructive",autoclose:!0,action:function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.a.send("VKWebAppClose",{status:"success"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}],onClose:()=>{C({type:"SET_POPOUT",payload:{popout:null}})}},n.a.createElement("h2",null,"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f?"),n.a.createElement("p",null,"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438?"));Object(l.useEffect)(()=>{D&&(E({params:{date:new Date(O.currentDate)}}),b(!1))},[D,E,O.currentDate]),Object(l.useEffect)(()=>{r&&(C({type:"SET_ACCOUNTS",payload:{accounts:(null===r||void 0===r?void 0:r.accounts)?null===r||void 0===r?void 0:r.accounts:[]}}),C({type:"SET_BUDGETS",payload:{budgets:(null===r||void 0===r?void 0:r.budgets)?null===r||void 0===r?void 0:r.budgets:[]}}))},[r,C]),Object(l.useEffect)(()=>{window.onpopstate=()=>{var e=+new Date;O.canClose?C({type:"SET_POPOUT",payload:{popout:Y,alert:!0}}):e-j>500?(_(e),C({type:"SET_HISTORY_BACK"})):window.history.pushState(null,null)}},[C,O.history,O.modal,j,O.canClose,Y]);var X=Object(l.useCallback)(()=>{b(!0)},[]),Q=()=>{C({type:"SET_EDITED_ITEM",payload:{item:null}}),C({type:S,payload:{modal:null}}),H("")},Z=n.a.createElement(g.y,{activeModal:O.modal,onClose:Q},n.a.createElement(g.w,{id:"add-account",header:n.a.createElement(g.x,{left:t===g.a&&n.a.createElement(g.C,{onClick:Q},n.a.createElement(se.a,null)),right:n.a.createElement(g.C,{onClick:Q},t===g.r?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":null)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0435\u0442")},n.a.createElement(fe,{dispatch:C,editedItem:O.editedItem})),n.a.createElement(g.w,{id:"add-money",header:n.a.createElement(g.x,{left:t===g.a&&n.a.createElement(g.C,{onClick:Q},n.a.createElement(se.a,null)),right:n.a.createElement(g.C,{onClick:Q},t===g.r?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":null)},O.editedItem?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c")},n.a.createElement(Fe,{accounts:O.accounts,id:null===(e=O.account)||void 0===e?void 0:e._id,editedItem:O.editedItem,dispatch:C,budget:O.budget,panel:O.activePanel,shopListItemTitle:k,setShopListItemTitle:H,date:O.currentDate})),n.a.createElement(g.w,{id:"add-budget",header:n.a.createElement(g.x,{left:t===g.a&&n.a.createElement(g.C,{onClick:Q},n.a.createElement(se.a,null)),right:n.a.createElement(g.C,{onClick:Q},t===g.r?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":null)},O.editedItem?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442")},n.a.createElement(Ke,{editedItem:O.editedItem,dispatch:C,date:O.currentDate})),n.a.createElement(g.w,{id:"transfer-money",header:n.a.createElement(g.x,{left:t===g.a&&n.a.createElement(g.C,{onClick:Q},n.a.createElement(se.a,null)),right:n.a.createElement(g.C,{onClick:Q},t===g.r?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":null)},"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438")},n.a.createElement(wt,{accounts:O.accounts,dispatch:C}))),$=e=>{C({type:"SET_ACTIVE_VIEW",payload:{view:e.currentTarget.dataset.story,panel:e.currentTarget.dataset.panel}})},ee=n.a.createElement(g.R,{itemsLayout:"horizontal"},n.a.createElement(g.S,{onClick:$,selected:"home"===O.activeView,"data-story":"home","data-panel":"home",text:"\u0411\u0430\u043b\u0430\u043d\u0441"},n.a.createElement(Ee.a,null)),n.a.createElement(g.S,{onClick:$,selected:"info"===O.activeView&&("budgets"===O.activePanel||"budget"===O.activePanel),"data-story":"info","data-panel":"budgets",text:"\u0411\u044e\u0434\u0436\u0435\u0442\u044b"},n.a.createElement(ve.a,null)),n.a.createElement(g.S,{onClick:$,selected:"stats"===O.activeView&&"stats"===O.activePanel,"data-story":"stats","data-panel":"stats",text:"\u0421\u0432\u043e\u0434\u043a\u0430"},n.a.createElement(be.a,null)),n.a.createElement(g.S,{onClick:$,selected:"more"===O.activeView,"data-story":"more","data-panel":"index",text:"\u0415\u0449\u0451"},n.a.createElement(he.a,null)));return n.a.createElement(g.g,{scheme:O.scheme},n.a.createElement(g.j,{activeStory:O.activeView,tabbar:"init"!==O.activeView&&"init"!==O.activePanel&&ee},n.a.createElement(m.a,{id:"init",activePanel:O.activePanel},n.a.createElement(ut,{id:"init",dispatch:C,loading:O.popout,bannerData:F,setBannerData:x})),n.a.createElement(m.a,{id:"home",activePanel:O.activePanel,popout:O.popout,modal:Z},n.a.createElement(te,{id:"home",accounts:O.accounts,budgets:O.budgets,dispatch:C,isLoading:s,context:O.contextHistory,onRefresh:X,isFetching:s,shopList:L})),n.a.createElement(m.a,{id:"info",activePanel:O.activePanel,popout:O.popout,modal:Z},n.a.createElement(Re,{id:"account",account:O.accounts.find(e=>{var t;return e._id===(null===(t=O.account)||void 0===t?void 0:t._id)}),dispatch:C,onRefresh:X,context:O.contextHistory,date:O.currentDate,scheme:O.scheme}),n.a.createElement(Ue,{id:"budgets",budgets:O.budgets,dispatch:C,onRefresh:X,date:O.currentDate,bannerData:F,setBannerData:x}),n.a.createElement(at,{id:"budget",budget:O.budgets.find(e=>{var t;return e._id===(null===(t=O.budget)||void 0===t?void 0:t._id)}),dispatch:C,context:O.contextHistory,date:O.currentDate})),n.a.createElement(m.a,{id:"stats",activePanel:O.activePanel,popout:O.popout,modal:Z},n.a.createElement(lt,{id:"stats",accounts:O.accounts,onRefresh:X,dispatch:C})),n.a.createElement(m.a,{id:"more",activePanel:O.activePanel,popout:O.popout,modal:Z},n.a.createElement(vt,{id:"index",dispatch:C,addToHomeScreenSupported:U,addedToHomeScreen:z,bannerData:F,setBannerData:x}),n.a.createElement(Ot,{id:"shop-list",dispatch:C,shopListFromServer:L,setShopListItemTitle:H,setShopList:N,context:O.contextHistory,success:O.successMessage,error:O.error}),n.a.createElement(jt,{id:"stats"}))))};u.a.render(n.a.createElement(G,null,n.a.createElement(Ft,null)),document.getElementById("root")),new URL(window.location.href).searchParams.get("vk_user_id")==="3479465".toString()&&Promise.all([a.e(3),a.e(4)]).then(a.bind(null,347)).then(()=>{})}},[[203,1,2]]]);
//# sourceMappingURL=main.33376550.chunk.js.map