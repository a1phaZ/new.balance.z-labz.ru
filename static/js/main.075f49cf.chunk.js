(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{203:function(e,t,a){e.exports=a(332)},332:function(e,t,a){"use strict";a.r(t);a(204),a(230),a(232),a(233),a(235),a(236),a(237),a(238),a(239),a(240),a(241),a(242),a(244),a(245),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(263),a(264),a(265),a(266),a(267),a(268),a(269),a(270),a(271),a(272);var n=a(0),l=a.n(n),o=a(141),r=a.n(o),c=a(25),i=a.n(c),u=a(29),d=a(8),s=a(62),m=a.n(s),p=(a(281),a(157)),v=a.n(p),E=a(158),f=a.n(E),y=a(63),b=a.n(y),O=a(98),h=a.n(O),g=a(3),T=function(e){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(e)},j=a(75),S=a.n(j),C=function(e){var t=e.data,a=e.showAll,o=void 0!==a&&a,r=e.dispatch,c=e.itemsName,s=e.needHide,m=void 0===s||s,p=Object(n.useState)((function(){return o})),v=Object(d.a)(p,2),E=v[0],f=v[1];if(0===t.length){if("accounts"===c)return l.a.createElement(g.k,null,"\u041d\u0435\u0442 \u0441\u0447\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f");if("budgets"===c)return l.a.createElement(g.k,null,"\u041d\u0435\u0442 \u0431\u044e\u0434\u0436\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f")}var y=t.sort((function(e,t){return t.sum-e.sum})).map((function(e,t){return console.log(e),3!==t||E?t>3&&!E?null:l.a.createElement(S.a,{key:t,indicator:T(e.sum),expandable:!0,"data-id":e._id,onClick:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("accounts"!==c){e.next=5;break}return e.next=3,r({type:"SET_ACCOUNT",payload:{id:t.currentTarget.dataset.id}});case 3:return e.next=5,r({type:"SET_ACTIVE_VIEW",payload:{view:"info",panel:"account"}});case 5:if("budgets"!==c){e.next=10;break}return e.next=8,r({type:"SET_BUDGET",payload:{id:t.currentTarget.dataset.id}});case 8:return e.next=10,r({type:"SET_ACTIVE_VIEW",payload:{view:"info",panel:"budget"}});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},e.title):l.a.createElement(S.a,{key:t,expandable:!0,onClick:function(){f(!0)}},l.a.createElement(g.M,{weight:"semibold",style:{marginBottom:16}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"))}));return m&&E&&y.push(l.a.createElement(S.a,{key:t.length,expandable:!0,onClick:function(){f(!1)}},l.a.createElement(g.M,{weight:"semibold",style:{marginBottom:16}},"accounts"===c?"\u0421\u043a\u0440\u044b\u0442\u044c \u0441\u0447\u0435\u0442\u0430":"\u0421\u043a\u0440\u044b\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442\u044b"))),y},_=a(55),w=a.n(_),A=a(72),x=a.n(A),D=a(37),k=a(7),I={accounts:[],budgets:[],account:null,budget:null,modal:null,successMessage:null,error:null,activeView:"init",activePanel:"init",popout:null,editedItem:null,currentDate:new Date,history:[],modalsHistory:[],popoutHistory:[],canClose:!0,scheme:"client_light"},M=function(e,t){switch(t.type){case"SET_COLOR_SCHEME":return Object(k.a)(Object(k.a)({},e),{},{scheme:t.payload.scheme});case"SET_ACTIVE_VIEW":window.history.pushState(null,null);var a=e.history;if(0!==a.length){var n=a[a.length-1];return n.view===t.payload.view&&n.panel===t.payload.panel?Object(k.a)({},e):Object(k.a)(Object(k.a)({},e),{},{activeView:t.payload.view,activePanel:t.payload.panel,history:[].concat(Object(D.a)(a),[{view:t.payload.view,panel:t.payload.panel}]),canClose:!1})}return Object(k.a)(Object(k.a)({},e),{},{activeView:t.payload.view,activePanel:t.payload.panel,history:[].concat(Object(D.a)(a),[{view:t.payload.view,panel:t.payload.panel}]),canClose:!0});case"SET_HISTORY_BACK":window.history.pushState(null,null);var l=e.history[e.history.length-2],o=e.popoutHistory||[],r=e.modalsHistory||[];if(0!==o.length){var c=e.history.length<=1;return Object(k.a)(Object(k.a)({},e),{},{popout:null,popoutHistory:[],canClose:c,editedItem:null})}if(0!==r.length){var i=e.history.length<=1;return Object(k.a)(Object(k.a)({},e),{},{modal:null,modalsHistory:[],canClose:i,editedItem:null})}if(l){var u="home"===l.view&&"home"===l.panel,d=e.history;return d.pop(),Object(k.a)(Object(k.a)({},e),{},{activeView:l.view,activePanel:l.panel,history:Object(D.a)(d),editedItem:null,canClose:u})}return Object(k.a)(Object(k.a)({},e),{},{activeView:"home",activePanel:"home",history:[],canClose:!0,editedItem:null});case"SET_ACCOUNTS":var s,m=null===(s=e.account)||void 0===s?void 0:s._id,p=m?t.payload.accounts.find((function(e){return e._id===m})):m;return Object(k.a)(Object(k.a)({},e),{},{accounts:t.payload.accounts,account:p});case"SET_BUDGETS":var v,E=null===(v=e.budget)||void 0===v?void 0:v._id,f=E?t.payload.budgets.find((function(e){return e._id===E})):E;return Object(k.a)(Object(k.a)({},e),{},{budgets:t.payload.budgets,budget:f});case"SET_ACCOUNT":var y=t.payload.id;return Object(k.a)(Object(k.a)({},e),{},{account:e.accounts.find((function(e){return e._id===y}))});case"SET_BUDGET":var b=t.payload.id;return Object(k.a)(Object(k.a)({},e),{},{budget:b?e.budgets.find((function(e){return e._id===b})):b});case"SET_EDITED_ITEM":return Object(k.a)(Object(k.a)({},e),{},{editedItem:t.payload.item});case"SET_POPOUT":window.history.pushState(null,null);var O=e.history,h=e.canClose;return 0!==O.length||t.payload.popout?h=1===O.length&&!t.payload.popout:0!==O.length||t.payload.popout||(h=!0),Object(k.a)(Object(k.a)({},e),{},{popout:t.payload.popout,popoutHistory:t.payload.popout?[t.payload.popout]:[],canClose:h});case"SET_MODAL":window.history.pushState(null,null);var g=e.history,T=e.canClose;return 0!==g.length||t.payload.modal?T=1===g.length&&!t.payload.modal:0!==g.length||t.payload.modal||(T=!0),Object(k.a)(Object(k.a)({},e),{},{modal:t.payload.modal,modalsHistory:t.payload.modal?[t.payload.modal]:[],canClose:T});case"SET_SUCCESS_MESSAGE":return Object(k.a)(Object(k.a)({},e),{},{successMessage:t.payload.message});case"SET_ERROR":return Object(k.a)(Object(k.a)({},e),{},{error:t.payload.error});case"SET_DATE":return Object(k.a)(Object(k.a)({},e),{},{currentDate:new Date(t.payload.date)});default:return e}},P=Object(n.createContext)(),R=function(e){var t=e.children,a=Object(n.useReducer)(M,I);return l.a.createElement(P.Provider,{value:a},t)},L=a(152),H=a.n(L),V=a(153),G=a.n(V),N=function(){var e=Object(n.useContext)(P),t=Object(d.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(null),c=Object(d.a)(r,2),i=c[0],u=c[1];return Object(n.useEffect)((function(){a.error&&u(l.a.createElement(g.I,{onClose:function(){o({type:"SET_ERROR",payload:{error:null}}),u(null)},before:l.a.createElement(H.a,{style:{color:"var(--destructive)"}})},a.error.message))}),[u,o,a.error]),Object(n.useEffect)((function(){a.successMessage&&u(l.a.createElement(g.I,{onClose:function(){o({type:"SET_SUCCESS_MESSAGE",payload:{message:null}}),u(null)},before:l.a.createElement(G.a,{style:{color:"var(--accent)"}})},a.successMessage))}),[u,o,a.successMessage]),l.a.createElement(l.a.Fragment,null,i)},q=a(334),U=a(154),F=a(335),B=a(336),K=a(64),W=a(155),z=a.n(W),Y=a(156),J=a.n(Y),Q=function(e){var t=e.onRefresh,a=Object(n.useContext)(P),o=Object(d.a)(a,2),r=o[0],c=o[1],i=Object(q.a)(Object(U.a)(r.currentDate,1),new Date),u=Object(n.useState)(0),s=Object(d.a)(u,2),m=s[0],p=s[1];return l.a.createElement(g.m,null,l.a.createElement(g.e,{before:l.a.createElement(g.c,{onClick:function(){var e=+new Date;e-m>500&&(c({type:"SET_DATE",payload:{date:Object(F.a)(r.currentDate,1)}}),t(),p(e))},mode:"secondary"},l.a.createElement(z.a,null)),asideContent:l.a.createElement(g.c,{disabled:i,onClick:function(){var e=+new Date;e-m>500&&(c({type:"SET_DATE",payload:{date:Object(U.a)(r.currentDate,1)}}),t(),p(e))},mode:"secondary"},l.a.createElement(J.a,null)),style:{textAlign:"center",fontWeight:"bold"}},Object(B.a)(r.currentDate,"LLLL yyyy",{locale:K.a}).toLocaleUpperCase()))},X=function(e){var t=e.id,a=e.accounts,n=e.budgets,o=e.dispatch,r=e.onRefresh,c=e.isFetching,i=a.map((function(e){return e.sum})).reduce((function(e,t){return e+t}),0);return l.a.createElement(v.a,{id:t},l.a.createElement(f.a,{left:l.a.createElement(l.a.Fragment,null,l.a.createElement(g.x,{onClick:function(){o({type:"SET_MODAL",payload:{modal:"add-account"}})}},l.a.createElement(x.a,null)),0!==a.length&&l.a.createElement(g.x,{onClick:function(){o({type:"SET_ACCOUNT",payload:{id:null}}),o({type:"SET_MODAL",payload:{modal:"add-money"}})}},l.a.createElement(w.a,null)))},"\u0411\u0430\u043b\u0430\u043d\u0441"),l.a.createElement(Q,{onRefresh:r}),l.a.createElement(g.C,{onRefresh:r,isFetching:c},l.a.createElement(g.q,null,l.a.createElement(b.a,{header:l.a.createElement(g.n,{mode:"secondary"},"\u0412\u0430\u0448\u0438 \u0441\u0447\u0435\u0442\u0430"),separator:"show"},l.a.createElement(h.a,null,l.a.createElement(g.O,{level:"1",weight:"semibold",style:{marginBottom:16}},T(i)),l.a.createElement(C,{data:a,dispatch:o,showAll:!1,itemsName:"accounts"}))),l.a.createElement(b.a,{header:l.a.createElement(g.n,{mode:"secondary"},"\u0412\u0430\u0448\u0438 \u0431\u044e\u0434\u0436\u0435\u0442\u044b"),separator:"show"},l.a.createElement(h.a,null,l.a.createElement(C,{data:n,dispatch:o,showAll:!1,itemsName:"budgets"}))))),l.a.createElement(N,null))},Z=a(56),$=a(99),ee=a.n($),te=a(159),ae=a.n(te),ne=function(e){var t=Object(n.useState)(!1),a=Object(d.a)(t,2),o=a[0],r=a[1],c=Object(n.useState)(null),s=Object(d.a)(c,2),m=s[0],p=s[1],v=Object(n.useState)(null),E=Object(d.a)(v,2),f=E[0],y=E[1],b=Object(n.useState)({}),O=Object(d.a)(b,2),h=O[0],T=O[1],j=Object(n.useContext)(P),S=Object(d.a)(j,2)[1],C=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T(e),p(null),y(null),r(!0),S({type:"SET_POPOUT",payload:{popout:l.a.createElement(g.B,null,l.a.createElement(g.F,null))}})}),[S]),_=h.method,w=void 0===_?"GET":_,A=h.params,x=Object(Z.a)(h,["method","params"]),D={method:w,baseURL:"https://balance.z-labz.ru/api",url:e,headers:{"Content-Type":"application/json"},params:A?Object(k.a)(Object(k.a)({},A),ee.a.parse(window.location.search)):Object(k.a)({},ee.a.parse(window.location.search)),data:"GET"!==w?x:null};return Object(n.useEffect)((function(){o&&function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!1),e.next=3,ae()(D).then(function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(t.data.data),S({type:"SET_POPOUT",payload:{popout:null}}),S({type:"SET_MODAL",payload:{modal:null}}),S({type:"SET_SUCCESS_MESSAGE",payload:{message:t.data.message}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t=(null===e||void 0===e?void 0:e.response)?e.response.data.error:new Error("\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c \u043a API");y(t),r(!1),S({type:"SET_POPOUT",payload:{popout:null}}),S({type:"SET_MODAL",payload:{modal:null}}),S({type:"SET_ERROR",payload:{error:t}})}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[o,D,S]),[{isLoading:o,response:m,error:f},C]},le=a(30),oe=a.n(le),re=a(53),ce=a.n(re),ie=a(164),ue=a.n(ie),de=a(165),se=a.n(de),me=a(166),pe=a.n(me),ve=function(e){var t=e.currentTarget.validity;return t.valid&&" "!==e.currentTarget.value?{status:"valid",message:null}:t.badInput||t.valueMissing||" "===e.currentTarget.value?{status:"error",message:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0432\u043e\u0434\u0430 | \u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435"}:t.tooLong?{status:"error",message:"\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u0430 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430"}:t.typeMismatch?{status:"error",message:"\u041d\u0435\u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u0442\u0438\u043f\u0430"}:t.rangeOverflow?"date"===e.currentTarget.type?{status:"error",message:"\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u0432\u0435\u0441\u0442\u0438 \u0431\u0443\u0434\u0443\u0449\u0443\u044e \u0434\u0430\u0442\u0443"}:{status:"error",message:"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0435 \u0447\u0438\u0441\u043b\u043e"}:t.rangeUnderflow?"date"===e.currentTarget.type?{status:"error",message:"\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u0432\u0435\u0441\u0442\u0438 \u0434\u0430\u0442\u0443 \u0440\u0430\u043d\u044c\u0448\u0435 1 \u044f\u043d\u0432\u0430\u0440\u044f 2015"}:{status:"error",message:"\u041d\u0435\u043b\u044c\u0437\u044f \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0447\u0438\u0441\u043b\u0430"}:{status:"default",message:null}},Ee={title:"",sum:"",titleValidation:{},sumValidation:{}},fe=function(e,t){switch(t.type){case"CHANGE_STATE":var a=t.payload;return Object(k.a)(Object(k.a)({},e),a);default:return e}},ye=function(e){var t=e.onRefresh,a=Object(n.useReducer)(fe,Ee),o=Object(d.a)(a,2),r=o[0],c=o[1],s=ne("/money-box"),m=Object(d.a)(s,2),p=m[0].response,v=m[1];return Object(n.useEffect)((function(){p&&t()}),[p,t]),l.a.createElement(g.l,{onSubmit:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,v({method:"POST",title:r.title,sum:r.sum});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l.a.createElement(g.p,{type:"text",placeholder:"\u041a\u0430\u0440\u0442\u0430, \u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0435, \u0441\u0447\u0435\u0442 \u0432 \u0431\u0430\u043d\u043a\u0435",top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:r.title,required:!0,maxLength:"20",status:r.titleValidation.status,bottom:r.titleValidation.message?r.titleValidation.message:"".concat(r.title.length," \u0438\u0437 20"),onChange:function(e){return c({type:"CHANGE_STATE",payload:{title:e.currentTarget.value.replace(/^\s*/g,""),titleValidation:ve(e)}})}}),l.a.createElement(g.p,{type:"number",placeholder:T(0),top:"\u0411\u0430\u043b\u0430\u043d\u0441 \u0441\u0447\u0435\u0442\u0430",value:r.sum,required:!0,status:r.sumValidation.status,max:999999999,min:0,step:.01,bottom:r.sumValidation.message?r.sumValidation.message:"\u0414\u0435\u043d\u0435\u0436\u043d\u044b\u0435 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430, \u043d\u0430\u0445\u043e\u0434\u044f\u0449\u0438\u0435\u0441\u044f \u043d\u0430 \u0441\u0447\u0435\u0442\u0435 \u0432 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442",onChange:function(e){return c({type:"CHANGE_STATE",payload:{sum:e.currentTarget.value,sumValidation:ve(e)}})}}),l.a.createElement(g.c,{size:"xl"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))},be={account:"",title:"",date:Object(B.a)(new Date,"yyyy-MM-dd"),income:!1,description:"",price:"",quantity:"",tags:[],boxPrice:!1,validate:{account:{},title:{},description:{},price:{},quantity:{},tags:{}}},Oe=function(e,t){switch(t.type){case"CHANGE_STATE":var a=t.payload,n=a.validateForm,l=Object(Z.a)(a,["validateForm"]);return Object(k.a)(Object(k.a)(Object(k.a)({},e),l),{},{validate:Object(k.a)(Object(k.a)({},e.validate),n)});default:return e}},he=function(e){var t,a,o,r,c,i,u,s,m,p,v,E,f,y,b,O,h,j,S,C,_,w,A,x,D,I,M,P,R,L,H,V,G,N,q=e.accounts,U=e.id,F=void 0===U?null:U,K=e.editedItem,W=void 0===K?null:K,z=e.onRefresh,Y=Object(n.useState)((function(){return W?"/item/".concat(W._id):"/item"})),J=Object(d.a)(Y,1)[0],Q=ne(J),X=Object(d.a)(Q,2),Z=X[0].response,$=X[1],ee=Object(n.useReducer)(Oe,be),te=Object(d.a)(ee,2),ae=te[0],le=te[1],oe=q.map((function(e){return l.a.createElement("option",{key:e._id,value:e._id},e.title," (",T(e.sum),")")}));Object(n.useEffect)((function(){W&&(W.date=Object(B.a)(new Date(W.date),"yyyy-MM-dd"),le({type:"CHANGE_STATE",payload:Object(k.a)({},W)}))}),[W,le]),Object(n.useEffect)((function(){Z&&z()}),[Z,z]);var re=ae.tags.map((function(e,t){return l.a.createElement(g.h,{style:{marginRight:"5px",marginBottom:"5px"},key:t},e)}));return l.a.createElement(g.l,{onSubmit:function(e){e.preventDefault(),$({method:W?"PATCH":"POST",date:ae.date,title:ae.title,description:ae.description,price:ae.boxPrice?ae.price/ae.quantity:ae.price,quantity:ae.quantity,income:ae.income,tags:ae.tags,itemFrom:ae.account||F})}},l.a.createElement(g.H,{top:"\u0421\u0447\u0435\u0442",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0447\u0435\u0442",onChange:function(e){le({type:"CHANGE_STATE",payload:{account:e.currentTarget.value,validateForm:{account:ve(e)}}})},defaultValue:(null===W||void 0===W?void 0:W.itemFrom)||F||ae.account,required:!0,status:null===(t=ae.validate)||void 0===t||null===(a=t.account)||void 0===a?void 0:a.status,bottom:null===(o=ae.validate)||void 0===o||null===(r=o.account)||void 0===r?void 0:r.message},oe),l.a.createElement(g.p,{type:"date",top:"\u0414\u0430\u0442\u0430",value:ae.date,required:!0,min:"2015-01-01",max:Object(B.a)(new Date,"yyyy-MM-dd"),onChange:function(e){le({type:"CHANGE_STATE",payload:{date:e.currentTarget.value,validateForm:{date:ve(e)}}})},status:null===(c=ae.validate)||void 0===c||null===(i=c.date)||void 0===i?void 0:i.status,bottom:null===(u=ae.validate)||void 0===u||null===(s=u.date)||void 0===s?void 0:s.message}),l.a.createElement(g.p,{type:"text",placeholder:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442, \u0443\u0441\u043b\u0443\u0433\u0430, \u0442\u043e\u0432\u0430\u0440",value:ae.title,top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,maxLength:20,status:null===(m=ae.validate)||void 0===m||null===(p=m.title)||void 0===p?void 0:p.status,bottom:(null===(v=ae.validate)||void 0===v||null===(E=v.title)||void 0===E?void 0:E.message)?null===(f=ae.validate)||void 0===f||null===(y=f.title)||void 0===y?void 0:y.message:"".concat(ae.title.length," \u0438\u0437 20"),onChange:function(e){le({type:"CHANGE_STATE",payload:{title:e.currentTarget.value.replace(/^\s*/g,""),validateForm:{title:ve(e)}}})}}),l.a.createElement(g.D,{name:"income",value:!1,defaultChecked:!ae.income||null,onClick:function(){le({type:"CHANGE_STATE",payload:{income:!1}})}},"\u0420\u0430\u0441\u0445\u043e\u0434"),l.a.createElement(g.D,{name:"income",value:!0,defaultChecked:!!ae.income||null,onClick:function(){le({type:"CHANGE_STATE",payload:{income:!0}})}},"\u0414\u043e\u0445\u043e\u0434"),!ae.income&&l.a.createElement(g.N,{top:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430(\u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430, \u0443\u0441\u043b\u0443\u0433\u0438)",value:ae.description,maxLength:70,status:null===(b=ae.validate)||void 0===b||null===(O=b.description)||void 0===O?void 0:O.status,bottom:(null===(h=ae.validate)||void 0===h||null===(j=h.description)||void 0===j?void 0:j.message)?null===(S=ae.validate)||void 0===S||null===(C=S.description)||void 0===C?void 0:C.message:"".concat(ae.description.length," \u0438\u0437 70"),onChange:function(e){le({type:"CHANGE_STATE",payload:{description:e.currentTarget.value,validateForm:{description:ve(e)}}})}}),l.a.createElement(g.p,{type:"text",top:"\u0422\u0435\u0433\u0438",value:ae.tags.join(" "),placeholder:"\u0422\u0435\u0433\u0438 \u0447\u0435\u0440\u0435\u0437 \u043f\u0440\u043e\u0431\u0435\u043b",status:null===(_=ae.validate)||void 0===_||null===(w=_.tags)||void 0===w?void 0:w.status,maxLength:100,bottom:(null===(A=ae.validate)||void 0===A||null===(x=A.tags)||void 0===x?void 0:x.message)?null===(D=ae.validate)||void 0===D||null===(I=D.tags)||void 0===I?void 0:I.message:"".concat(ae.tags.join(" ").length," \u0438\u0437 100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),onChange:function(e){le({type:"CHANGE_STATE",payload:{tags:""!==e.currentTarget.value?e.currentTarget.value.toLowerCase().split(" "):[],validateForm:{tags:ve(e)}}})}}),0!==ae.tags.length&&l.a.createElement(g.i,{style:{display:"flex",flexWrap:"wrap"}},re),l.a.createElement(g.p,{type:"number",placeholder:T(0),top:"\u0426\u0435\u043d\u0430",max:99999999,min:0,step:.01,status:null===(M=ae.validate)||void 0===M||null===(P=M.price)||void 0===P?void 0:P.status,bottom:null===(R=ae.validate)||void 0===R||null===(L=R.price)||void 0===L?void 0:L.message,value:ae.price,required:!0,onChange:function(e){le({type:"CHANGE_STATE",payload:{price:e.currentTarget.value,validateForm:{price:ve(e)}}})}}),l.a.createElement(g.f,{value:ae.boxPrice,onClick:function(){le({type:"CHANGE_STATE",payload:{boxPrice:!ae.boxPrice}})}},"\u0426\u0435\u043d\u0430 \u0437\u0430 \u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0443"),l.a.createElement(g.p,{type:"number",placeholder:"0",top:"\u041a\u043e\u043b-\u0432\u043e",max:9999999,min:0,step:.001,status:null===(H=ae.validate)||void 0===H||null===(V=H.quantity)||void 0===V?void 0:V.status,bottom:null===(G=ae.validate)||void 0===G||null===(N=G.quantity)||void 0===N?void 0:N.message,value:ae.quantity,required:!0,onChange:function(e){le({type:"CHANGE_STATE",payload:{quantity:e.currentTarget.value,validateForm:{quantity:ve(e)}}})}}),l.a.createElement(g.c,{size:"xl"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c ".concat(ae.boxPrice?T(ae.price):T(ae.price*ae.quantity))))},ge=a(73),Te=a.n(ge),je=a(74),Se=a.n(je);function Ce(e){return function(t,a){return(null===t||void 0===t?void 0:t.titleDate)?l.a.createElement(g.d,{level:"2",weight:"semibold",caps:!0,key:a},Object(B.a)(new Date(null===t||void 0===t?void 0:t.titleDate),"dd MMMM yyyy",{locale:K.a})):l.a.createElement(g.E,{key:a,multiline:!0,caption:Object(B.a)(new Date(null===t||void 0===t?void 0:t.date),"dd MMMM yyyy",{locale:K.a}),after:(null===t||void 0===t?void 0:t.income)?T(null===t||void 0===t?void 0:t.sum):T(-1*(null===t||void 0===t?void 0:t.sum)),"data-id":null===t||void 0===t?void 0:t._id,onClick:function(){e({type:"SET_EDITED_ITEM",payload:{item:t}}),e({type:"SET_MODAL",payload:{modal:"add-money"}})}},null===t||void 0===t?void 0:t.title)}}var _e=a(160),we=function(e,t){var a=new Date(e.date),n=new Date(t.date);return Object(_e.a)(n,a)},Ae=a(161),xe=function(e,t){var a;return Object(Ae.a)(new Date(null===(a=e[e.length-1])||void 0===a?void 0:a.date),new Date(t.date))?[].concat(Object(D.a)(e),[t]):[].concat(Object(D.a)(e),[{titleDate:t.date},t])},De=function(e){var t=e.id,a=e.account,o=e.dispatch,r=e.onRefresh,c=Object(n.useState)(!1),s=Object(d.a)(c,2),m=s[0],p=s[1],v=ne("/money-box/".concat(null===a||void 0===a?void 0:a._id)),E=Object(d.a)(v,2),f=E[0].response,y=E[1],O=Object(n.useState)((function(){return a?null===a||void 0===a?void 0:a.operations:[]})),h=Object(d.a)(O,2),j=h[0],S=h[1],C=Object(n.useState)((function(){return j||[]})),_=Object(d.a)(C,2),A=_[0],x=_[1],D=A.sort(we).reduce(xe,[]).map(Ce(o)),k=function(){p(!m)},I=l.a.createElement(g.b,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",mode:"destructive",autoclose:!0,action:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(),e.next=3,y({method:"DELETE"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}],onClose:function(){k(),o({type:"SET_POPOUT",payload:{popout:null}})}},l.a.createElement("h2",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0447\u0435\u0442?"),l.a.createElement("p",null,"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u0447\u0435\u0442\u0430 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044e \u0432\u0441\u0435\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0434\u043e\u0445\u043e\u0434\u0430\u043c \u0438 \u0440\u0430\u0441\u0445\u043e\u0434\u0430\u043c, \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u043c \u043a \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0441\u0447\u0435\u0442\u0443. \u0421\u0443\u043c\u043c\u044b \u0431\u044e\u0434\u0436\u0435\u0442\u043e\u0432 \u043c\u043e\u0433\u0443\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0442\u044c\u0441\u044f \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e."));Object(n.useEffect)((function(){a&&(S(null===a||void 0===a?void 0:a.operations),x(null===a||void 0===a?void 0:a.operations))}),[a]),Object(n.useEffect)((function(){f&&(o({type:"SET_HISTORY_BACK"}),o({type:"SET_EDITED_ITEM",payload:{item:null}}),r())}),[o,f,r]);return l.a.createElement(g.u,{id:t},l.a.createElement(g.v,{left:l.a.createElement(l.a.Fragment,null,l.a.createElement(g.w,{onClick:function(){o({type:"SET_HISTORY_BACK"}),o({type:"SET_EDITED_ITEM",payload:{item:null}})}}),l.a.createElement(g.x,{onClick:function(){o({type:"SET_EDITED_ITEM",payload:{item:null}}),o({type:"SET_MODAL",payload:{modal:"add-money"}})}},l.a.createElement(w.a,null)))},l.a.createElement(g.y,{aside:a&&l.a.createElement(Te.a,{style:{transform:"rotate(".concat(m?"180deg":"0",")")}}),onClick:k},a?null===a||void 0===a?void 0:a.title:"\u0421\u0447\u0435\u0442 \u0443\u0434\u0430\u043b\u0451\u043d")),a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(g.z,{opened:m,onClose:k},l.a.createElement(g.q,null,l.a.createElement(g.e,{before:l.a.createElement(Se.a,null),onClick:function(){o({type:"SET_POPOUT",payload:{popout:I}})}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0447\u0435\u0442 ",null===a||void 0===a?void 0:a.title))),l.a.createElement(Q,{onRefresh:r}),l.a.createElement(g.G,{onChange:function(e){var t;t=e.currentTarget.value,x(""===t?j:null===a||void 0===a?void 0:a.operations.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>-1})))}}),l.a.createElement(b.a,{header:l.a.createElement(g.n,{mode:"secondary"},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u043e \u0441\u0447\u0435\u0442\u0443"),separator:"show"},l.a.createElement(g.i,null,l.a.createElement(g.O,{level:"1",weight:"semibold",style:{marginBottom:16}},T(null===a||void 0===a?void 0:a.sum))),0===(null===a||void 0===a?void 0:a.operations.length)&&l.a.createElement(g.k,null,"\u041e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u043f\u043e \u0441\u0447\u0435\u0442\u0443 \u0435\u0449\u0435 \u043d\u0435 \u0431\u044b\u043b\u043e"),l.a.createElement(g.i,null,D,0===D.length&&l.a.createElement(g.k,null,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"))),l.a.createElement(N,null)))},ke=function(e){var t=e.id,a=e.budgets,n=e.dispatch,o=e.date,r=void 0===o?new Date:o,c=e.onRefresh,i=a.map((function(e){return e.startSum})).reduce((function(e,t){return e+t}),0),u=a.map((function(e){return e.sum})).reduce((function(e,t){return e+t}),0);return l.a.createElement(g.u,{id:t},l.a.createElement(g.v,{left:l.a.createElement(g.x,{onClick:function(){return n({type:"SET_MODAL",payload:{modal:"add-budget"}})}},l.a.createElement(x.a,null))},"\u0411\u044e\u0434\u0436\u0435\u0442\u044b"),l.a.createElement(Q,{onRefresh:c}),l.a.createElement(g.m,{header:l.a.createElement(g.n,{mode:"secondary"},"\u0412\u0430\u0448\u0438 \u0431\u044e\u0434\u0436\u0435\u0442\u044b \u043d\u0430 ",Object(B.a)(new Date(r),"dd MMMM yyyy",{locale:K.a})),separator:"show"},l.a.createElement(C,{data:a,dispatch:n,showAll:!0,itemsName:"budgets",needHide:!1}),l.a.createElement(g.k,null,"\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c ",T(u)," \u0438\u0437 ",T(i))),l.a.createElement(N,null))},Ie={title:"",startSum:"",validate:{title:{},startSum:{}}},Me=function(e,t){switch(t.type){case"CHANGE_STATE":var a=t.payload,n=a.validateForm,l=Object(Z.a)(a,["validateForm"]);return Object(k.a)(Object(k.a)(Object(k.a)({},e),l),{},{validate:Object(k.a)(Object(k.a)({},e.validate),n)});default:return e}},Pe=function(e){var t,a,o,r,c,s,m,p,v,E,f,y,b=e.onRefresh,O=e.editedItem,h=void 0===O?null:O,j=Object(n.useReducer)(Me,Ie),S=Object(d.a)(j,2),C=S[0],_=S[1],w=Object(n.useState)((function(){return h?"/budget/".concat(h._id):"/budget"})),A=Object(d.a)(w,1)[0],x=ne(A),D=Object(d.a)(x,2),I=D[0].response,M=D[1];return Object(n.useEffect)((function(){h&&(I||_({type:"CHANGE_STATE",payload:Object(k.a)({},h)}))}),[h,_,I]),Object(n.useEffect)((function(){I&&b()}),[b,I]),l.a.createElement(g.l,{onSubmit:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,M({method:h?"PATCH":"POST",title:C.title,sum:C.startSum});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},l.a.createElement(g.p,{type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u044e\u0434\u0436\u0435\u0442\u0430",top:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:C.title,required:!0,maxLength:"20",status:null===(t=C.validate)||void 0===t||null===(a=t.title)||void 0===a?void 0:a.status,bottom:(null===(o=C.validate)||void 0===o||null===(r=o.title)||void 0===r?void 0:r.message)?null===(c=C.validate)||void 0===c||null===(s=c.title)||void 0===s?void 0:s.message:"".concat(C.title.length," \u0438\u0437 20"),onChange:function(e){return _({type:"CHANGE_STATE",payload:{title:e.currentTarget.value.replace(/^\s*/g,""),validateForm:{title:ve(e)}}})}}),l.a.createElement(g.p,{type:"number",placeholder:T(0),top:"\u0411\u044e\u0434\u0436\u0435\u0442 \u0432 \u0440\u0443\u0431\u043b\u044f\u0445",value:C.startSum,required:!0,status:null===(m=C.validate)||void 0===m||null===(p=m.startSum)||void 0===p?void 0:p.status,min:0,max:999999999,step:.01,bottom:(null===(v=C.validate)||void 0===v||null===(E=v.startSum)||void 0===E?void 0:E.message)?null===(f=C.validate)||void 0===f||null===(y=f.startSum)||void 0===y?void 0:y.message:"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u044b \u0433\u043e\u0442\u043e\u0432\u044b \u043d\u0430 \u044d\u0442\u043e \u043f\u043e\u0442\u0440\u0430\u0442\u0438\u0442\u044c?",onChange:function(e){return _({type:"CHANGE_STATE",payload:{startSum:e.currentTarget.value,validateForm:{startSum:ve(e)}}})}}),l.a.createElement(g.c,{size:"xl"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))},Re=a(162),Le=a.n(Re),He=function(e){var t=e.id,a=e.budget,o=e.dispatch,r=e.onRefresh,c=Object(n.useState)(!1),s=Object(d.a)(c,2),m=s[0],p=s[1],v=ne("/budget/".concat(null===a||void 0===a?void 0:a._id)),E=Object(d.a)(v,2),f=E[0].response,y=E[1],b=Object(n.useState)((function(){return null===a||void 0===a?void 0:a.items})),O=Object(d.a)(b,2),h=O[0],T=O[1],j=Object(n.useState)((function(){return h})),S=Object(d.a)(j,2),C=S[0],_=S[1];Object(n.useEffect)((function(){T(null===a||void 0===a?void 0:a.items),_(null===a||void 0===a?void 0:a.items)}),[a]),Object(n.useEffect)((function(){f&&(null===f||void 0===f?void 0:f.deletedCount)&&(o({type:"SET_HISTORY_BACK"}),o({type:"SET_EDITED_ITEM",payload:{item:null}}),r())}),[f,o,r]);var A=function(){p(!m)},x=l.a.createElement(g.b,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",mode:"destructive",autoclose:!0,action:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(),e.next=3,y({method:"DELETE"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}],onClose:function(){A(),o({type:"SET_POPOUT",payload:{popout:null}})}},l.a.createElement("h2",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442?"),l.a.createElement("p",null,"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442?")),D=C&&C.sort(we).reduce(xe,[]).map(Ce(o));return l.a.createElement(g.u,{id:t},l.a.createElement(g.v,{left:l.a.createElement(l.a.Fragment,null,l.a.createElement(g.w,{onClick:function(){o({type:"SET_HISTORY_BACK"})}}),l.a.createElement(g.x,{onClick:function(){o({type:"SET_EDITED_ITEM",payload:{item:null}}),o({type:"SET_MODAL",payload:{modal:"add-money"}})}},l.a.createElement(w.a,null)))},l.a.createElement(g.y,{aside:a&&l.a.createElement(Te.a,{style:{transform:"rotate(".concat(m?"180deg":"0",")")}}),onClick:A},a?null===a||void 0===a?void 0:a.title:"\u0411\u044e\u0434\u0436\u0435\u0442 \u0443\u0434\u0430\u043b\u0451\u043d")),a&&l.a.createElement(l.a.Fragment,null,l.a.createElement(g.z,{opened:m,onClose:A},l.a.createElement(g.q,null,l.a.createElement(g.e,{before:l.a.createElement(Le.a,null),onClick:function(){o({type:"SET_EDITED_ITEM",payload:{item:a}}),o({type:"SET_MODAL",payload:{modal:"add-budget"}}),A()}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442 ",null===a||void 0===a?void 0:a.title),l.a.createElement(g.e,{before:l.a.createElement(Se.a,null),onClick:function(){o({type:"SET_POPOUT",payload:{popout:x}})}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442 ",null===a||void 0===a?void 0:a.title))),l.a.createElement(g.G,{onChange:function(e){var t;t=e.currentTarget.value,_(""===t?h:a.items.filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>-1})))}}),l.a.createElement(g.i,null,D,0===(null===D||void 0===D?void 0:D.length)&&l.a.createElement(g.k,null,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f")),l.a.createElement(N,null)))},Ve=function(e){var t=e.id,a=e.accounts,o=e.onRefresh,r=Object(n.useState)((function(){return a.map((function(e){return e.operations})).flat().filter((function(e){return!e.income})).sort((function(e,t){return e.title.localeCompare(t.title)}))})),c=Object(d.a)(r,2),i=c[0],u=c[1],s=Object(n.useState)((function(){return i})),m=Object(d.a)(s,2),p=m[0],v=m[1],E=p.reduce((function(e,t){var a;if((null===(a=e[e.length-1])||void 0===a?void 0:a.title)===t.title){var n=e[e.length-1];n.sum=n.sum+t.sum,n.quantity+=t.quantity;var l=[].concat(Object(D.a)(e.slice(0,e.length-1)),[n]);return Object(D.a)(l)}return[].concat(Object(D.a)(e),[{title:t.title,sum:t.sum,quantity:t.quantity}])}),[]).map((function(e,t){return l.a.createElement(g.E,{key:t,multiline:!0,caption:"\u041a\u043e\u043b-\u0432\u043e: ".concat(null===e||void 0===e?void 0:e.quantity," | \u0421\u0440. \u0446\u0435\u043d\u0430 ").concat(T((null===e||void 0===e?void 0:e.sum)/(null===e||void 0===e?void 0:e.quantity))),after:T(null===e||void 0===e?void 0:e.sum),"data-title":null===e||void 0===e?void 0:e.title},null===e||void 0===e?void 0:e.title)}));Object(n.useEffect)((function(){var e=a.map((function(e){return e.operations})).flat().filter((function(e){return!e.income})).sort((function(e,t){return e.title.localeCompare(t.title)}));u(e),v(e)}),[a]);return l.a.createElement(g.u,{id:t},l.a.createElement(g.v,null,"\u0421\u0432\u043e\u0434\u043a\u0430"),l.a.createElement(Q,{onRefresh:o}),l.a.createElement(g.G,{onChange:function(e){var t;t=e.currentTarget.value,v(""===t?a.map((function(e){return e.operations})).flat().filter((function(e){return!e.income})).sort((function(e,t){return e.title.localeCompare(t.title)})):a.map((function(e){return e.operations})).flat().filter((function(e){return!e.income})).sort((function(e,t){return e.title.localeCompare(t.title)})).filter((function(e){return e.title.toLowerCase().indexOf(t.toLowerCase())>-1})))}}),l.a.createElement(g.m,null,E,0===E.length&&l.a.createElement(g.k,null,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445 \u0434\u043b\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f")))},Ge=a(163),Ne=a.n(Ge),qe=function(e){var t=e.id,a=e.dispatch,n=e.loading;return l.a.createElement(g.u,{id:t},l.a.createElement(g.A,{icon:n?l.a.createElement(g.J,{size:"large"}):l.a.createElement(Ne.a,null),action:!n&&l.a.createElement(g.c,{onClick:function(){a({type:"SET_ACTIVE_VIEW",payload:{view:"home",panel:"home"}})},id:"initial-button"},"\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c"),stretched:!0},n?"\u041f\u043e\u0434\u0433\u043e\u0442\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043a \u0437\u0430\u043f\u0443\u0441\u043a\u0443":"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0433\u043e\u0442\u043e\u0432\u043e"))},Ue=function(){var e,t=Object(g.P)(),a=ne("/state"),o=Object(d.a)(a,2),r=o[0],c=r.response,s=r.isLoading,p=o[1],v=Object(n.useState)(!0),E=Object(d.a)(v,2),f=E[0],y=E[1],b=Object(n.useContext)(P),O=Object(d.a)(b,2),h=O[0],T=O[1],j=Object(n.useState)(0),S=Object(d.a)(j,2),C=S[0],_=S[1];Object(n.useEffect)((function(){oe.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;"VKWebAppUpdateConfig"===a&&T({type:"SET_COLOR_SCHEME",payload:{scheme:n.scheme}})})),oe.a.send("VKWebAppInit",{})}),[T]);var w=l.a.createElement(g.b,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"},{title:"\u0412\u044b\u0439\u0442\u0438",mode:"destructive",autoclose:!0,action:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.a.send("VKWebAppClose",{status:"success"});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}],onClose:function(){T({type:"SET_POPOUT",payload:{popout:null}})}},l.a.createElement("h2",null,"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f?"),l.a.createElement("p",null,"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u044b\u0439\u0442\u0438?"));Object(n.useEffect)((function(){f&&(p({params:{date:new Date(h.currentDate)}}),y(!1))}),[f,p,h.currentDate]),Object(n.useEffect)((function(){c&&(T({type:"SET_ACCOUNTS",payload:{accounts:(null===c||void 0===c?void 0:c.accounts)?null===c||void 0===c?void 0:c.accounts:[]}}),T({type:"SET_BUDGETS",payload:{budgets:(null===c||void 0===c?void 0:c.budgets)?null===c||void 0===c?void 0:c.budgets:[]}}))}),[c,T]),Object(n.useEffect)((function(){window.onpopstate=function(){var e=+new Date;h.canClose?T({type:"SET_POPOUT",payload:{popout:w}}):e-C>500?(_(e),T({type:"SET_HISTORY_BACK"})):window.history.pushState(null,null)}}),[T,h.history,h.modal,C,h.canClose,w]);var A=Object(n.useCallback)((function(){y(!0)}),[]),x=function(){T({type:"SET_MODAL",payload:{modal:null}})},D=l.a.createElement(g.t,{activeModal:h.modal,onClose:x},l.a.createElement(g.r,{id:"add-account",header:l.a.createElement(g.s,{left:t===g.a&&l.a.createElement(g.x,{onClick:x},l.a.createElement(ce.a,null)),right:l.a.createElement(g.x,{onClick:x},t===g.o?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":null)},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0435\u0442")},l.a.createElement(ye,{onRefresh:A})),l.a.createElement(g.r,{id:"add-money",header:l.a.createElement(g.s,{left:t===g.a&&l.a.createElement(g.x,{onClick:x},l.a.createElement(ce.a,null)),right:l.a.createElement(g.x,{onClick:x},t===g.o?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":null)},h.editedItem?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c")},l.a.createElement(he,{accounts:h.accounts,id:null===(e=h.account)||void 0===e?void 0:e._id,editedItem:h.editedItem,onRefresh:A})),l.a.createElement(g.r,{id:"add-budget",header:l.a.createElement(g.s,{left:t===g.a&&l.a.createElement(g.x,{onClick:x},l.a.createElement(ce.a,null)),right:l.a.createElement(g.x,{onClick:x},t===g.o?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":null)},h.editedItem?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u044e\u0434\u0436\u0435\u0442")},l.a.createElement(Pe,{editedItem:h.editedItem,onRefresh:A,dispatch:T}))),k=function(e){T({type:"SET_ACTIVE_VIEW",payload:{view:e.currentTarget.dataset.story,panel:e.currentTarget.dataset.panel}})},I=l.a.createElement(g.K,null,l.a.createElement(g.L,{onClick:k,selected:"home"===h.activeView,"data-story":"home","data-panel":"home",text:"\u0411\u0430\u043b\u0430\u043d\u0441"},l.a.createElement(ue.a,null)),l.a.createElement(g.L,{onClick:k,selected:"info"===h.activeView&&("budgets"===h.activePanel||"budget"===h.activePanel),"data-story":"info","data-panel":"budgets",text:"\u0411\u044e\u0434\u0436\u0435\u0442\u044b"},l.a.createElement(se.a,null)),l.a.createElement(g.L,{onClick:k,selected:"info"===h.activeView&&"stats"===h.activePanel,"data-story":"info","data-panel":"stats",text:"\u0421\u0432\u043e\u0434\u043a\u0430"},l.a.createElement(pe.a,null)));return l.a.createElement(g.g,{scheme:h.scheme},l.a.createElement(g.j,{activeStory:h.activeView,tabbar:"init"!==h.activeView&&"init"!==h.activePanel&&I},l.a.createElement(m.a,{id:"init",activePanel:h.activePanel},l.a.createElement(qe,{id:"init",dispatch:T,loading:h.popout})),l.a.createElement(m.a,{id:"home",activePanel:h.activePanel,popout:h.popout,modal:D},l.a.createElement(X,{id:"home",accounts:h.accounts,budgets:h.budgets,dispatch:T,isLoading:s,onRefresh:A,isFetching:s})),l.a.createElement(m.a,{id:"info",activePanel:h.activePanel,popout:h.popout,modal:D},l.a.createElement(De,{id:"account",account:h.accounts.find((function(e){var t;return e._id===(null===(t=h.account)||void 0===t?void 0:t._id)})),dispatch:T,onRefresh:A}),l.a.createElement(He,{id:"budget",budget:h.budgets.find((function(e){var t;return e._id===(null===(t=h.budget)||void 0===t?void 0:t._id)})),dispatch:T,onRefresh:A}),l.a.createElement(ke,{id:"budgets",budgets:h.budgets,dispatch:T,onRefresh:A,date:h.currentDate}),l.a.createElement(Ve,{id:"stats",accounts:h.accounts,onRefresh:A,dispatch:T}))))};r.a.render(l.a.createElement(R,null,l.a.createElement(Ue,null)),document.getElementById("root")),new URL(window.location.href).searchParams.get("vk_user_id")==="3479465".toString()&&Promise.all([a.e(3),a.e(4)]).then(a.bind(null,340)).then((function(){}))}},[[203,1,2]]]);
//# sourceMappingURL=main.075f49cf.chunk.js.map